if (self.CavalryLogger) { CavalryLogger.start_js(["lkdB+"]); }

__d('NotificationJewelReminderDialog.react',['cx','fbt','invariant','Arbiter','Image.react','ImageBlock.react','LayerFadeOnHide','LayerFadeOnShow','React','SubscriptionsHandler','XUIContextualDialog.react','ifRequired','intlList','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=l.constructor).call.apply(n,[this].concat(q)),this.$NotificationJewelReminderDialog2=new (c('SubscriptionsHandler'))(),this.state={shown:true},this.$NotificationJewelReminderDialog3=function(){clearTimeout(this.$NotificationJewelReminderDialog1)}.bind(this),this.$NotificationJewelReminderDialog4=function(s){this.$NotificationJewelReminderDialog5();this.props.onClick&&this.props.onClick(s)}.bind(this),this.$NotificationJewelReminderDialog6=function(){this.$NotificationJewelReminderDialog3()}.bind(this),this.$NotificationJewelReminderDialog7=function(){this.$NotificationJewelReminderDialog5()}.bind(this),this.$NotificationJewelReminderDialog5=function(){this.setState({shown:false},function(){this.props.onHide&&this.props.onHide()}.bind(this))}.bind(this),o}m.prototype.componentWillMount=function(){this.$NotificationJewelReminderDialog1=c('setTimeoutAcrossTransitions')(this.$NotificationJewelReminderDialog5,this.props.showTime);this.$NotificationJewelReminderDialog2.addSubscriptions(c('Arbiter').subscribe('layer_shown',function(n,o){if(o&&o.type==='Jewel')this.$NotificationJewelReminderDialog5();}.bind(this)),{remove:this.$NotificationJewelReminderDialog3});c('ifRequired')('ClientChromeStore',function(n){this.$NotificationJewelReminderDialog2.addSubscriptions({remove:n.subscribe(function(){var o=n.getState();if(o.bluebar.activeFlyout.type!=null)this.$NotificationJewelReminderDialog5();}.bind(this))})}.bind(this))};m.prototype.componentWillUnmount=function(){this.$NotificationJewelReminderDialog3();this.$NotificationJewelReminderDialog2.release()};m.prototype.$NotificationJewelReminderDialog8=function(){var n=this.props.names.map(function(p){return c('React').createElement('strong',null,p)});switch(this.props.jewelType){case 'notification':return i._({"*":"New notifications from {list of notification senders}","_1":"New notification from {list of notification senders}"},[i.plural(this.props.reminderCount),i.param('list of notification senders',c('intlList')(n))]);case 'request':var o=this.props.reminderCount-n.length;if(o>0){if(n.length===0){return i._({"*":"{number of friend requests} friend requests","_1":"1 friend request"},[i.plural(this.props.reminderCount,'number of friend requests')])}else if(n.length===1){return i._({"*":{"*":"{number of friend requests} friend requests from {name of person} and {number of unnamed people} others","_1":"{number of friend requests} friend requests from {name of person} and 1 other"},"_1":{"*":"1 friend request from {name of person} and {number of unnamed people} others","_1":"1 friend request from {name of person} and 1 other"}},[i.plural(this.props.reminderCount,'number of friend requests'),i.param('name of person',n[0]),i.plural(o,'number of unnamed people')])}else if(n.length>=2)return i._({"*":{"*":"{number of friend requests} friend requests from {name of first person}, {name of second person} and {number of unnamed people} others","_1":"{number of friend requests} friend requests from {name of first person}, {name of second person} and 1 other"},"_1":{"*":"1 friend request from {name of first person}, {name of second person} and {number of unnamed people} others","_1":"1 friend request from {name of first person}, {name of second person} and 1 other"}},[i.plural(this.props.reminderCount,'number of friend requests'),i.param('name of first person',n[0]),i.param('name of second person',n[1]),i.plural(o,'number of unnamed people')]);}else return i._({"*":"{number of friend requests} friend requests from {list of friend request senders}","_1":"1 friend request from {list of friend request senders}"},[i.plural(this.props.reminderCount,'number of friend requests'),i.param('list of friend request senders',c('intlList')(n))]);default:j(0);}};m.prototype.render=function(){var n=this.props.jewelType==='request'?i._({"*":"New friend requests","_1":"New friend request"},[i.plural(this.props.reminderCount)]):i._({"*":"New notifications","_1":"New notification"},[i.plural(this.props.reminderCount)]);return c('React').createElement(c('XUIContextualDialog.react'),{alignment:'right',autoFocus:false,behaviors:{LayerFadeOnShow:c('LayerFadeOnShow'),LayerFadeOnHide:c('LayerFadeOnHide')},context:this.props.context,dialogRole:'alert',focusContextOnHide:false,label:n,offsetY:-10,position:'below',shown:this.state.shown,width:210},c('React').createElement('div',{className:"_5bov",onClick:this.$NotificationJewelReminderDialog4,onMouseEnter:this.$NotificationJewelReminderDialog6,onMouseLeave:this.$NotificationJewelReminderDialog7,role:'presentation'},c('React').createElement(c('ImageBlock.react'),null,c('React').createElement(c('Image.react'),{className:"_5bow",src:this.props.photoURI}),c('React').createElement('div',null,this.$NotificationJewelReminderDialog8()))))};f.exports=m}),null);
__d('NotificationJewelReminder',['WorkFocusModeController','DOMQuery','NotificationJewelReminderDialog.react','React','ReactDOM','Toggler','ifRequired','ge'],(function a(b,c,d,e,f,g){var h=c('WorkFocusModeController').WorkFocusMode,i='fbNotificationsJewel',j='fbRequestsJewel';function k(o,p,q,r,s,t){var u=c('ge')(r);if(u==null||c('Toggler').getInstance(c('ge')(i)).isShown()||c('Toggler').getInstance(c('ge')(j)).isShown()){if(t)t();return}c('ReactDOM').render(c('React').createElement(c('NotificationJewelReminderDialog.react'),{context:c('DOMQuery').scry(u,'.jewelButton')[0],jewelType:r===i?'notification':'request',names:p,onClick:function v(){c('Toggler').show(u);c('ifRequired')('ClientChromeStore',function(w){w.dispatch({type:'UPDATE_ACTIVE_FLYOUT',data:r===i?'notification':'request'})})},onHide:t,photoURI:o,reminderCount:q,showTime:s}),document.createElement('div'))}function l(o,p){k(o.friendRequestData.pics[0],o.friendRequestData.names,o.friendRequestData.count,j,o.showTimeMs,p)}function m(o){k(o.notificationData.photoURI,o.notificationData.names,o.notificationData.names.length,i,o.showTimeMs)}var n={init:function o(p){if(h&&h.currentViewerInFocusMode())return;if(p.friendRequestData){l(p,function(){if(p.notificationData)m(p);})}else if(p.notificationData)m(p);}};f.exports=n}),null);