if (self.CavalryLogger) { CavalryLogger.start_js(["FmWU4"]); }

__d("WorkUserAvailabilityStatusType",[],(function a(b,c,d,e,f,g){f.exports={NONE:"None",AVAILABLE:"Available",SPORADIC:"Sporadic",TENTATIVE:"Tentative",BUSY:"Busy",DO_NOT_DISTURB:"Do Not Disturb",FOCUS:"Focus"}}),null);
__d('ItunesPluginLogging',['Run','Bootloader'],(function a(b,c,d,e,f,g){var h={logPluginData:function i(){c('Run').onAfterLoad(function(){var j=c('Bootloader');j.loadModules(["ItunesDetector","AsyncRequest"],function(k,l){new l().setURI('/ajax/ads/media/log').setData({status:k.hasItunes()}).send()},'ItunesPluginLogging')})}};f.exports=h}),null);
__d('ChatTypeaheadConstants',[],(function a(b,c,d,e,f,g){var h={USER_TYPE:'user',THREAD_TYPE:'thread',FRIEND_TYPE:'friend',NON_FRIEND_TYPE:'non_friend',FB4C_TYPE:'fb4c',PAGE_TYPE:'page',MEETING_ROOM_PAGE_TYPE:'meeting_room_page',COMMERCE_PAGE_TYPE:'commerce_page',HEADER_TYPE:'header',INTERNAL_BOT_PAGE_TYPE:'internal_bot_page',GAME_TYPE:'game'};f.exports=h}),null);
__d('ChatSidebarComposeLink.react',['fbt','ChatOpenTabEventLogger','FantaTabActions','Link.react','MercuryThreads','React','TooltipData'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('MercuryThreads').get();i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m){j.constructor.call(this,m)}l.prototype.render=function(){var m=h._("New Message");return c('React').createElement(c('Link.react'),babelHelpers['extends']({className:this.props.className,href:'#',onClick:this.$ChatSidebarComposeLink1},c('TooltipData').propsFor(m,'below')))};l.prototype.$ChatSidebarComposeLink1=function(m){var n=k.createNewLocalThreadGenerateID();c('FantaTabActions').openTabEventually(n,'compose_link');c('ChatOpenTabEventLogger').logClickOpen('sidebar',n);m.preventDefault()};f.exports=l}),null);
__d("ChatNotificationConstants",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NORMAL:0,NO_USER_MESSAGE_NOTIFICATION:1})}),null);
__d('ChatBehavior',['Arbiter','AvailableList','AvailableListConstants','ChatNotificationConstants'],(function a(b,c,d,e,f,g){var h=false,i=c('AvailableList').getWebChatNotification&&c('AvailableList').getWebChatNotification(),j=h,k=true,l=Object.assign(new (c('Arbiter'))(),{ON_CHANGED:'changed',notifiesUserMessages:function n(){return i!==c('ChatNotificationConstants').NO_USER_MESSAGE_NOTIFICATION},ignoresRemoteTabRaise:function n(){return j},showsTabUnreadUI:function n(){return k}});function m(){l.inform(l.ON_CHANGED)}c('AvailableList').subscribe&&c('AvailableList').subscribe(c('AvailableListConstants').ON_CHAT_NOTIFICATION_CHANGED,function(){var n=i,o=c('AvailableList').getWebChatNotification();i=o;if(n!=o)m();});c('Arbiter').subscribe('chat/set_does_page_occlude_tabs',function(n,o){j=!!o;m()});c('Arbiter').subscribe('chat/set_show_tab_unread_ui',function(n,o){k=!!o;m()});f.exports=l}),null);
__d('imageReact',['Image.react','ReasonReact','bs_js_null_undefined'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p){return c('ReasonReact').wrapJsForReason(c('Image.react'),{className:c('bs_js_null_undefined').from_opt(i),alt:c('bs_js_null_undefined').from_opt(j),src:c('bs_js_null_undefined').from_opt(k),height:c('bs_js_null_undefined').from_opt(l),title:c('bs_js_null_undefined').from_opt(m),width:c('bs_js_null_undefined').from_opt(n),style:c('bs_js_null_undefined').from_opt(o)},p)}g.make=h}),null);
__d("messengerSpinnerReact",["cx","ix","fbt","React","imageReact","ReasonReact","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=i("86853"),l=i("86857"),m=i("86854"),n=c("ReasonReact").statelessComponent("MessengerSpinnerReact");function o(s,t,u,v){var w=s?s[0]:"",x=t?t[0]:"blue",y=u?u[0]:24,z=function ba(){var ca=+(y===24);if(ca!==0){var da=+(x==="blue");if(da!==0){return k}else return l;}else return m;},aa=n.slice();aa[9]=function(){return c("React").cloneElement(c("ReasonReact").element(0,0,c("imageReact").make([c("joinClasses")(w,"_3u55 _3qh2")],0,[z(0)],[y],0,[y],0,[])),{"aria-label":j._("Loading..."),"aria-busy":true})};return aa}var p=c("ReasonReact").wrapReasonForJs(n,function(s){var t=s.className,u=s.color,v=s.size;return o([t==null?"":t],[u==null?"blue":u],[v==null?24:v],[])}),q=32,r=24;g.large_size=q;g.medium_size=r;g.blue_src=k;g.grey_src=l;g.large_blue_src=m;g.component=n;g.make=o;g.jsComponent=p}),null);
__d('MessengerSpinner.react',['messengerSpinnerReact'],(function a(b,c,d,e,f,g){f.exports=c('messengerSpinnerReact').jsComponent;f.exports.large_size=c('messengerSpinnerReact').large_size;f.exports.medium_size=c('messengerSpinnerReact').medium_size}),null);
__d('MessengerDotComUpsellMessage.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return h._("Chat faster on Messenger.com")};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d('MessengerDotComUpsellSheet.react',['cx','ChannelConnection','MessengerDotComUpsellMessage.react','Link.react','React','MercuryServerDispatcher','ShimButton.react','SubscriptionsHandler','ChatConfigInitialData','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.$MessengerDotComUpsellSheet2=function(m){m.preventDefault();c('MercuryServerDispatcher').trySend('/ajax/messenger_upsell/dismiss.php',[{}]);this.setState({shouldShow:false})}.bind(this);this.$MessengerDotComUpsellSheet3=function(m,n){this.setState({isConnected:!c('ChannelConnection').disconnected()})}.bind(this);this.state={isConnected:!c('ChannelConnection').disconnected(),shouldShow:c('ChatConfigInitialData').show_messenger_dot_com_upsell}}k.prototype.render=function(){if(!this.state.isConnected||!this.state.shouldShow)return null;var l=c('ChatConfigInitialData').messenger_dot_com_upsell_version;if(l!='blue'&&l!='white')return null;return c('React').createElement(c('Link.react'),{href:'https://www.messenger.com',target:'_blank',className:c('joinClasses')("_ua_",l)},c('React').createElement('div',{className:'content'},c('React').createElement('div',{className:'img'}),c('React').createElement('div',{className:'message'},c('React').createElement(c('MessengerDotComUpsellMessage.react'),null)),c('React').createElement(c('ShimButton.react'),{className:'close',onClick:this.$MessengerDotComUpsellSheet2})))};k.prototype.componentDidMount=function(){this.$MessengerDotComUpsellSheet1=new (c('SubscriptionsHandler'))();this.$MessengerDotComUpsellSheet1.addSubscriptions(c('ChannelConnection').subscribe([c('ChannelConnection').CONNECTED,c('ChannelConnection').SHUTDOWN,c('ChannelConnection').RECONNECTING],this.$MessengerDotComUpsellSheet3))};c('MercuryServerDispatcher').registerEndpoints({'/ajax/messenger_upsell/dismiss.php':{mode:c('MercuryServerDispatcher').IMMEDIATE}});f.exports=k}),null);
__d('MessengerSearchFunnelLogger',['FunnelLogger','MercuryIDs'],(function a(b,c,d,e,f,g){'use strict';var h;function i(p,q){c('FunnelLogger').startFunnel(p);if(q)c('FunnelLogger').addFunnelTag(p,q);c('FunnelLogger').appendActionIfNew(p,'search_start');h=[]}function j(p){c('FunnelLogger').appendActionIfNew(p,'search_end');c('FunnelLogger').endFunnel(p)}function k(p,q){c('FunnelLogger').appendActionWithPayload(p,'initiate_content_search',{query_string:q,impression_list:h});c('FunnelLogger').endFunnel(p)}function l(p,q,r,s){if(r==null||h==null||h.length===0){c('FunnelLogger').appendActionWithPayload(p,'search_result_error',{error:'threadID or latest impression list are null',thread_id:r,impression_list:h});c('FunnelLogger').endFunnel(p);return}r=c('MercuryIDs').getThreadFBIDFromThreadID(r);c('FunnelLogger').appendActionWithPayload(p,'log_result_selection',{thread_id:r,type:s,rank:h.indexOf(r),search_query:q?q:''})}function m(p,q,r){c('FunnelLogger').appendActionWithPayloadIfNew(p,'loading_state_impression_list',{search_query:q,impression_list:r});h=r}function n(p,q,r,s){c('FunnelLogger').appendActionWithPayload(p,q,{search_query:r,impression_list:s});h=s}function o(p){c('FunnelLogger').appendAction(p,'clear_search_query');this.endFunnel(p)}f.exports={startFunnel:i,logResultSelection:l,endFunnel:j,logContentSearchInitiation:k,logLoadingStateQuery:m,logUpdateQuery:n,logClearQuery:o}}),null);
__d('MessengerSearchFunnelLoggerConstants',[],(function a(b,c,d,e,f,g){'use strict';f.exports={NAME:'WWW_MESSENGER_SEARCH_SESSION_FUNNEL',FETCHED_STATE_IMPRESSION_LIST:'fetched_state_impression_list',FB_SIDEBAR_TAG:'fb_sidebar',USER_CONTACT:'user_contact',USER_NON_CONTACT:'user_non_contact',GROUP:'group',PAGE:'page',GAME:'game',TINCAN:'tincan',SMS:'sms',SMS_GROUP:'sms_group',COWORKER:'coworker',OTHER:'other'}}),null);
__d('MessengerSearchSource',['ChatSearchSource','MercuryConfig','MercuryIDs','MercuryParticipants','MercuryParticipantTypes','MercurySingletonProvider','MessengerEnvironment','MessengerTypeaheadUtils','SearchableEntry','emptyFunction','requireWeak'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=50,k=c('MessengerEnvironment').messengerui;h=babelHelpers.inherits(l,c('ChatSearchSource'));i=h&&h.prototype;l.getForFBID=function(n){return m.getForFBID(n)};l.get=function(){return m.get()};function l(n){i.constructor.call(this,{queryRequests:[{uri:'/ajax/mercury/composer_query.php'}]});this.$MessengerSearchSource1=[];this.$MessengerSearchSource2=n}l.prototype.bootstrapImpl=function(n){c('requireWeak')('OrderedFriendsList',function(p){return p.getSearchableEntries(j,true,function(q){this.$MessengerSearchSource1=q;i.addLocalEntries.call(this,q)}.bind(this))}.bind(this));var o=c('MercuryIDs').getParticipantIDFromUserID(this.$MessengerSearchSource2);c('MercuryParticipants').get(o,function(p){i.addLocalEntries.call(this,[new (c('SearchableEntry'))({uniqueID:p.fbid?p.fbid.toString():p.id,title:p.name,type:c('MercuryParticipantTypes').FRIEND,photo:p.big_image_src||p.image_src,uri:p.href,auxiliaryData:{isMessengerUser:p.is_messenger_user}})])}.bind(this));i.bootstrapImpl.call(this,c('emptyFunction'));n()};l.prototype.searchImpl=function(n,o,p){p=p||{};if(n===''&&p.showDefaultEntries){o(this.$MessengerSearchSource1,n);var q=p&&p.onQueryFinished;q&&q(n);return}p.threadLimit=c('MercuryConfig').MaxThreadResults;i.searchImpl.call(this,n,this.$MessengerSearchSource3(o,p),p)};l.prototype.$MessengerSearchSource3=function(n,o){return k&&o&&o.showThreadSearchEntry?function(p,q){var r=c('MessengerTypeaheadUtils').getMessageSearchEntry(q);if(r){n([r].concat(p),q)}else n(p,q);}:n};var m=new (c('MercurySingletonProvider'))(l);f.exports=l}),null);
__d('MessengerSearchTypeahead.react',['cx','fbt','ix','AbstractTypeahead.react','Bootloader','Image.react','MercuryIDs','MercuryThreadIDMap','MercuryThreads','MercuryTypeaheadConstants','mercuryVanityIDMapRe','MessengerActions','MessengerSearchFunnelLogger','MessengerSearchFunnelLoggerConstants','MessengerSearchSource','React','TypeaheadNavigation','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('MercuryThreadIDMap').get(),n=c('MercuryThreads').get(),o=c('React').PropTypes,p=j("86933"),q=100,r=null,s=null;k=babelHelpers.inherits(t,c('React').PureComponent);l=k&&k.prototype;function t(){var v,w;for(var x=arguments.length,y=Array(x),z=0;z<x;z++)y[z]=arguments[z];return w=(v=l.constructor).call.apply(v,[this].concat(y)),u.call(this),w}t.prototype.componentWillMount=function(){var v=function x(y,z,aa){var ba=y.indexOf(z),ca=ba==-1?y.length-1:ba-1;aa(ca==-1?y[y.length-1]:y[ca])},w=function x(y,z,aa){var ba=y.indexOf(z)+1;aa(ba==y.length?y[0]:y[ba])};v=c('TypeaheadNavigation').moveDown;w=c('TypeaheadNavigation').moveUp;this.$MessengerSearchTypeahead1=function(x){for(var y=arguments.length,z=Array(y>1?y-1:0),aa=1;aa<y;aa++)z[aa-1]=arguments[aa];return v.apply(undefined,[s.orderEntries(x,this.props.queryString)].concat(z))}.bind(this);this.$MessengerSearchTypeahead2=function(x){for(var y=arguments.length,z=Array(y>1?y-1:0),aa=1;aa<y;aa++)z[aa-1]=arguments[aa];return w.apply(undefined,[s.orderEntries(x,this.props.queryString)].concat(z))}.bind(this)};t.prototype.render=function(){var v=this.props.isFacebookChat?i._("Search"):i._("Search Messenger");return c('React').createElement('div',{className:"_3rh8"},c('React').createElement(c('AbstractTypeahead.react'),{'aria-label':i._("friends to message"),autoHighlight:this.props.isFacebookChat,blurOnWindowBlur:false,className:c('joinClasses')(this.props.className||'',"_5iwm"+(this.props.isFocused||!!this.props.queryString?' '+"_5iwn":'')+(' '+"_150g")+(this.props.hideResults?' '+"_1a03":'')),disabled:this.props.hideResults,inputClassName:"_3rhb navigationFocus",navigation:{moveUp:this.$MessengerSearchTypeahead1,moveDown:this.$MessengerSearchTypeahead2},onBlur:this.$MessengerSearchTypeahead3,onChange:this.$MessengerSearchTypeahead4,onFocus:this.$MessengerSearchTypeahead5,onMouseOver:this.$MessengerSearchTypeahead6,onClick:this.$MessengerSearchTypeahead6,onSelectAttempt:this.$MessengerSearchTypeahead7,placeholder:v.toString(),presenter:{ViewRenderer:r,alwaysVisibleOnFocus:true,extraRendererProps:{className:"_11_d",hasHoverState:this.props.isFacebookChat,isLoading:this.state.isLoading,onScrollIntoView:this.props.onScrollIntoView,viewer:this.props.viewer},maxEntries:this.props.maxEntries||q,sortEntries:this.$MessengerSearchTypeahead8,useLayer:false},queryString:this.props.queryString,role:'search',searchSource:c('MessengerSearchSource').getForFBID(this.props.viewer),searchSourceOptions:{onQueryFinished:this.$MessengerSearchTypeahead9,onQueryStarted:this.$MessengerSearchTypeahead10,showDefaultEntries:!this.props.isFacebookChat,showThreadSearchEntry:!this.props.isFacebookChat&&!!this.props.queryString},selectOnTab:true,spellCheck:false,showEntriesOnFocus:!this.props.isFacebookChat}),c('React').createElement(c('Image.react'),{onMouseDown:function(){var w;this.$MessengerSearchTypeahead11();(w=this.props).onClear.apply(w,arguments)}.bind(this),className:c('joinClasses')(this.props.className||'',(!this.props.queryString?"hidden_elem":'')+(' '+"_2xme")),src:p}))};t.prototype.$MessengerSearchTypeahead11=function(){c('MessengerSearchFunnelLogger').logClearQuery(c('MessengerSearchFunnelLoggerConstants').NAME)};t.propTypes={className:o.string,hideResults:o.bool,isFacebookChat:o.bool,isFocused:o.bool,maxEntries:o.number,onBlur:o.func,onChange:o.func,onClear:o.func,onFocus:o.func,onSelect:o.func.isRequired,onScrollIntoView:o.func,queryString:o.string,viewer:o.string.isRequired};var u=function v(){this.state={isLoading:false,orderable:!!s};this.$MessengerSearchTypeahead3=function(){var w;(w=this.props).onBlur.apply(w,arguments);c('MessengerSearchFunnelLogger').endFunnel(c('MessengerSearchFunnelLoggerConstants').NAME)}.bind(this);this.$MessengerSearchTypeahead4=function(){var w;(w=this.props).onChange.apply(w,arguments)}.bind(this);this.$MessengerSearchTypeahead5=function(){var w;this.$MessengerSearchTypeahead6();(w=this.props).onFocus.apply(w,arguments)}.bind(this);this.$MessengerSearchTypeahead6=function(){if(!this.state.orderable)c('Bootloader').loadModules(["MessengerTypeaheadView.react","MessengerTypeaheadUtils","messengerGraphQLThreadFetcherRe"],function(w,x,y){r=w;s=x;this.setState({orderable:true})}.bind(this),'MessengerSearchTypeahead.react');}.bind(this);this.$MessengerSearchTypeahead10=function(w){if(w===this.props.queryString)this.setState({isLoading:true});}.bind(this);this.$MessengerSearchTypeahead9=function(w){if(w===this.props.queryString)this.setState({isLoading:false});}.bind(this);this.$MessengerSearchTypeahead8=function(w){return s?s.sortEntries(w,this.props.queryString):w}.bind(this);this.$MessengerSearchTypeahead7=function(w){var x,y=this,z=w.getUniqueID(),aa=w.getType(),ba=w.getAuxiliaryData().alias;if(ba)c('mercuryVanityIDMapRe').set(ba,c('MercuryIDs').getParticipantIDFromUserID(z));if(aa===c('MercuryTypeaheadConstants').SEARCH_TYPE){c('MessengerActions').changeQueryAll(this.props.queryString);c('MessengerSearchFunnelLogger').logContentSearchInitiation(c('MessengerSearchFunnelLoggerConstants').NAME,this.props.queryString)}else if(aa===c('MercuryTypeaheadConstants').THREAD_TYPE){m.getClientIDFromServerID(z,function(ca){this.props.onSelect(ca,aa);c('MessengerSearchFunnelLogger').logResultSelection(c('MessengerSearchFunnelLoggerConstants').NAME,this.props.queryString,ca,c('MessengerSearchFunnelLoggerConstants').GROUP)}.bind(this))}else (function(){var ca=void 0;switch(aa){case c('MercuryTypeaheadConstants').FRIEND_TYPE:ca=c('MessengerSearchFunnelLoggerConstants').USER_CONTACT;break;case c('MercuryTypeaheadConstants').NON_FRIEND_TYPE:ca=c('MessengerSearchFunnelLoggerConstants').USER_NON_CONTACT;break;case c('MercuryTypeaheadConstants').FB4C_TYPE:ca=c('MessengerSearchFunnelLoggerConstants').COWORKER;break;case c('MercuryTypeaheadConstants').GAME_TYPE:ca=c('MessengerSearchFunnelLoggerConstants').GAME;break;case c('MercuryTypeaheadConstants').PAGE_TYPE:case c('MercuryTypeaheadConstants').INTERNAL_BOT_PAGE_TYPE:case c('MercuryTypeaheadConstants').COMMERCE_PAGE_TYPE:case c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE:ca=c('MessengerSearchFunnelLoggerConstants').PAGE;break;default:ca=c('MessengerSearchFunnelLoggerConstants').OTHER;}n.getThreadMeta(c('MercuryIDs').getThreadIDFromUserID(z),function(da){this.props.onSelect(da.thread_id,aa);c('MessengerSearchFunnelLogger').logResultSelection(c('MessengerSearchFunnelLoggerConstants').NAME,this.props.queryString,da.thread_id,ca)}.bind(y))})();}.bind(this)};f.exports=t}),null);
__d('ChatTypeaheadWrapper.react',['cx','Arbiter','Bootloader','LoadOnRender.react','ChatConfig','ChatOpenTabEventLogger','ChatSidebarComposeLink.react','ChatSidebarSections','ChatSidebarSheet.react','ChatTypeaheadConstants','FantaTabActions','LazyComponent.react','MercuryIDs','MercuryParticipantTypes','MessengerDotComUpsellSheet.react','MessengerSearchFunnelLogger','MessengerSearchFunnelLoggerConstants','MessengerSearchTypeahead.react','MercuryConfig','React','Run','emptyFunction','getActiveElement'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=40,l=c('ChatConfig').get('divebar_rounded_profile',false);function m(o){c('Arbiter').inform('sidebar/typeahead/active',o)}i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.state={height:0,value:'',isSearching:false,dropdownComponent:null,GCFComponent:null},this.$ChatTypeaheadWrapper1=function(){this.setState({isSearching:false,value:''});c('MessengerSearchFunnelLogger').endFunnel(c('MessengerSearchFunnelLoggerConstants').NAME)}.bind(this),p}n.prototype.componentDidMount=function(){if(this.props.isSidebar){c('Arbiter').subscribe('sidebar/resized',function(o,p){this.setState({height:p})}.bind(this));c('Run').onAfterLoad(function(){c('Bootloader').loadModules(["ChatSidebarDropdown.react","SidebarType","ChatSidebarActions"],function(p,q,r){this.setState({dropdownComponent:c('React').createElement(p,{sidebarType:q.SIDEBAR,onToggleSidebar:r.disable})})}.bind(this),'ChatTypeaheadWrapper.react');if(c('MercuryConfig').NewGCF){var o=function p(q){c('Bootloader').loadModules(["chatSidebarGroupCreateButtonReact"],function(r){var s=r.jsComponent;return q(s)},'ChatTypeaheadWrapper.react')};this.setState({GCFComponent:c('React').createElement(c('LoadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),null),loader:o,placeholder:c('React').createElement('div',{className:"_1-4-"})})})}}.bind(this))}else c('Arbiter').subscribe('buddyList/resized',function(o,p){this.setState({height:p})}.bind(this));};n.prototype.componentWillUpdate=function(o,p){if(p.isSearching!==this.state.isSearching)m(p.isSearching);};n.prototype.render=function(){var o=this.state.height!=null?Math.floor((this.state.height-k*2)/k):null;return c('React').createElement('div',{className:!l?"squareProfile":''},c('React').createElement(c('MessengerDotComUpsellSheet.react'),{className:'fbMessengerDotComUpsell'}),c('React').createElement(c('ChatSidebarSheet.react'),{className:'fbChatSidebarMessage'}),c('React').createElement(c('MessengerSearchTypeahead.react'),{className:c('MercuryConfig').NewGCF?"_62it":'',isFacebookChat:true,isFocused:true,maxEntries:o,queryString:this.state.value,viewer:this.props.id,onBlur:this.$ChatTypeaheadWrapper1,onChange:function(p){var q=p.target.value;this.setState({isSearching:q!=='',value:q})}.bind(this),onClear:c('emptyFunction'),onFocus:this.$ChatTypeaheadWrapper2,onScrollIntoView:c('emptyFunction'),onSelect:function(p,q){c('getActiveElement')().blur();if(q===c('ChatTypeaheadConstants').MEETING_ROOM_PAGE_TYPE){c('Bootloader').loadModules(["goURI"],function(s){this.setState({isSearching:false,value:''});var t=c('MercuryIDs').getUserIDFromThreadID(p);s('/'+(t||''))}.bind(this),'ChatTypeaheadWrapper.react')}else{c('FantaTabActions').openTab(p,'chat_sidebar_typeahead');var r=null;if(!q||q===c('MercuryParticipantTypes').FRIEND||q===c('ChatTypeaheadConstants').FRIEND_TYPE||q===c('ChatTypeaheadConstants').PAGE_TYPE||q===c('ChatTypeaheadConstants').USER_TYPE)if(c('MercuryIDs').isValidThreadID(p))r=c('MercuryIDs').getUserIDFromThreadID(p);c('ChatOpenTabEventLogger').logClickOpen(c('ChatSidebarSections').TYPEAHEAD,p,r)}}.bind(this)}),this.props.isSidebar?c('React').createElement('div',{className:"_531b"},this.state.dropdownComponent,c('React').createElement(c('ChatSidebarComposeLink.react'),{className:"_3a-4 _5q85"}),this.state.GCFComponent):null)};n.prototype.$ChatTypeaheadWrapper2=function(){c('MessengerSearchFunnelLogger').startFunnel(c('MessengerSearchFunnelLoggerConstants').NAME,c('MessengerSearchFunnelLoggerConstants').FB_SIDEBAR_TAG)};f.exports=n}),null);
__d('ChatTypeaheadCore',['ChatTypeaheadWrapper.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={init:function i(j,k,l){c('ReactDOM').render(c('React').createElement(c('ChatTypeaheadWrapper.react'),{id:k,isSidebar:l}),j)}};f.exports=h}),null);
__d("NotifTestIDs",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({REACT_BLUE_BAR_JEWEL:"react_blue_bar_jewel",NON_REACT_BLUE_BAR_JEWEL:"non_react_blue_bar_jewel",REACT_NOTIF_LIST:"react_notif_list",NOTIF_LIST_ITEM:"notif_list_item",SEE_ALL_LIST:"see_all_list",REACT_NOTIF_JEWEL_FLYOUT:"react_notif_jewel_flyout",NON_REACT_NOTIF_JEWEL_FLYOUT:"non_react_notif_jewel_flyout",CHEVRON:"chevron",REACT_MARK_ALL_AS_READ_LINK:"react_mark_all_as_read_link",NON_REACT_MARK_ALL_AS_READ_LINK:"non_react_mark_all_as_read_link",NOTIFICATION_SOUND_SETTING:"notifiation_sound_setting",NOTIFICATION_SOUND_SETTING_SELECTOR:"notifiation_sound_setting_selector",MESSAGE_SOUND_SETTING:"message_sound_setting",MESSAGE_SOUND_SETTING_SELECTOR:"message_sound_setting_selector",CLOSE_FRIEND_ACTIVITY_SELECTOR:"close_friend_activity_selector",BIRTHDAY_SELECTOR:"birthday_selector",ON_THIS_DAY_SELECTOR:"on_this_day_selector",TAGS_SELECTOR:"tags_selector",LIVE_VIDEO_SELECTOR:"live_video_selector",REACT_BADGE_COUNT_CONTAINER:"react_badge_count_container",NON_REACT_BADGE_COUNT_CONTAINER:"non_react_badge_count_container",BEEPER_LIST:"beeper_list",NON_REACT_SETTING_LINK:"non_react_setting_link",REACT_SETTING_LINK:"react_setting_link",GEOGRAPHIC_SUBSCRIPTION_SELECTOR:"geographic_subscription_selector"})}),null);
__d('NotificationBeepData',['idx'],(function a(b,c,d,e,f,g){'use strict';f.exports={fromNotification:function h(i){var j;if(!i.showBeep||!i.alert_id||i.pinnedConvoConfig&&i.pinnedConvoConfig.hide_beeper_naive)return null;var k=i.unaggregatedActors||i.actors,l=i.alert_id,m=l+'-'+String(i.receivedTime);return {actors:k,beepID:m,beepUpdatesOnTop:i.beepUpdatesOnTop,eligible_buckets:i.eligible_buckets,icon:i.icon,notificationID:l,notifID:i.id,previewImage:i.previewImage,primerAttributes:i.primerAttributes,receivedTime:i.receivedTime,rendererData:i.rendererData,renderer_data:i.renderer_data,sound:!!i.sound,text:i.unaggregatedTitle||i.title,thumbnail:i.thumbnail||((j=k)!=null?(j=j[0])!=null?j.profile_picture:j:j),timestamp:i.timestamp,tracking:i.tracking,url:i.url}}}}),null);
__d('NotificationBeeperConst',['keyMirror'],(function a(b,c,d,e,f,g){var h={IDLE_DELAY:10000,ACTIVE_DELAY_LONG:4000,FADE_OUT_LENGTH:1500,BeepStates:c('keyMirror')({PENDING:true,RENDERED:true,READY_TO_HIDE:true,FADING_OUT:true})};f.exports=h}),null);
__d('NotificationBeeperItemCloseButton.react',['cx','fbt','React','XUIAbstractGlyphButton.react'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){'use strict';var m=i._("Close");return c('React').createElement(c('XUIAbstractGlyphButton.react'),babelHelpers['extends']({},this.props,{className:"_3soc",title:m,label:m,labelIsHidden:true}))};function l(){'use strict';j.apply(this,arguments)}f.exports=l}),null);
__d('NotificationInterpolator',['Badge.react','React','WorkModeConfig'],(function a(b,c,d,e,f,g){function h(i,j){var k=null;if(!c('WorkModeConfig').is_in_solo_community&&(j.entity.is_viewer_coworker===false||j.entity.is_multi_company_group===true))k=c('React').createElement(c('Badge.react'),{type:'work_non_coworker'});return c('React').createElement('span',{className:'fwb'},i,k)}f.exports=h}),null);
__d('NotificationListRendererUtils',['Bootloader','NotificationURI','PageTransitions','URI'],(function a(b,c,d,e,f,g){'use strict';var h=10;function i(event,m){event.preventDefault();c('Bootloader').loadModules(["FBStoriesLiveNotificationHandler"],function(n){n.renderLiveStory(m)},'NotificationListRendererUtils')}function j(event,m,n){event.preventDefault();c('Bootloader').loadModules(["TahoeController"],function(o){var p=c('NotificationURI').localize(new (c('URI'))(n.url));o.openFromVideoLink(new (c('URI'))(p),m.video_channel_id,m.video_channel_caller)},'NotificationListRendererUtils')}function k(event,m,n){event.preventDefault();c('Bootloader').loadModules(["VideoChannelHandleLink"],function(o){o.openChannel(m.video_channel_id,m.video_channel_caller,m.video_id);var p=new (c('URI'))(c('NotificationURI').localize(new (c('URI'))(n.url))),q=function r(s){if(s.getQueryData().ref!=='notif_channel')return false;c('PageTransitions').transitionComplete();return true};c('PageTransitions').registerHandler(q,h);c('PageTransitions').go(new (c('URI'))(p.getPath()).addQueryData('ref','notif_channel'))},'NotificationListRendererUtils')}var l={openNotification:function m(event,n){var o=n.renderer_data;if(o.__typename==='LiveVideoNotificationRendererData')if(o.bucket_data){i(event,o)}else if(o.can_render_in_tahoe){j(event,o,n)}else if(!o.can_render_in_tahoe&&o.video_channel_id)k(event,o,n);}};f.exports=l}),null);
__d('RelationshipDelightTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:RelationshipDelightLoggerConfig',this.$RelationshipDelightTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:RelationshipDelightLoggerConfig',this.$RelationshipDelightTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$RelationshipDelightTypedLogger1={};return this};h.prototype.updateData=function(j){this.$RelationshipDelightTypedLogger1=babelHelpers['extends']({},this.$RelationshipDelightTypedLogger1,j);return this};h.prototype.setAlertID=function(j){this.$RelationshipDelightTypedLogger1.alert_id=j;return this};h.prototype.setEvent=function(j){this.$RelationshipDelightTypedLogger1.event=j;return this};h.prototype.setMetadata=function(j){this.$RelationshipDelightTypedLogger1.metadata=j;return this};h.prototype.setVC=function(j){this.$RelationshipDelightTypedLogger1.vc=j;return this};var i={alert_id:true,event:true,metadata:true,vc:true};f.exports=h}),null);
__d('RelationshipDelightUtils',['NotificationRelationshipDelightsConfig','QE2Logger','RelationshipDelightTypedLogger'],(function a(b,c,d,e,f,g){'use strict';var h={};function i(n){var o=n.eligible_buckets;return !!o&&o.indexOf('SO_NOTIFICATIONS')!==-1}function j(){c('QE2Logger').logExposureForUser(c('NotificationRelationshipDelightsConfig').universeName)}function k(n){var o=c('NotificationRelationshipDelightsConfig').shouldDecorateNotificationWithHearts,p=c('NotificationRelationshipDelightsConfig').shouldLogExposureForNotification;if(o===false||i(n)===false)return false;if(p)j();return true}function l(n,event,o){var p=event+'-'+n;if(h[p])return;h[p]=true;var q=new (c('RelationshipDelightTypedLogger'))().setEvent(event).setAlertID(n);if(o)q.setMetadata(JSON.stringify(o));q.log()}var m={shouldHeartBadge:function n(o){var p=c('NotificationRelationshipDelightsConfig').shouldDecorateBadgeWithHearts,q=c('NotificationRelationshipDelightsConfig').shouldLogExposureForBadge;if(p===false||i(o)===false)return false;if(q)j();return true},shouldHeartBeeper:k,shouldHeartNotification:k,logNotificationAnimation:function n(o,p,q){l(o,'notification_animated',{animation:p,rowIndex:q})},logBeeperAnimation:function n(o){l(o,'beeper_animated')},logBadgeAnimation:function n(o){l(o,'badge_animated')}};f.exports=m}),null);
__d('NotificationBeeperItemContents.react',['cx','Animation','AsyncRequest','BootloadedComponent.react','Bootloader','FBProfilePhotoShadow.react','Image.react','ImageBlock.react','JSResource','NotificationBeeperItemCloseButton.react','NotificationInterpolator','NotificationListRendererUtils','NotificationURI','NotificationUserActions','React','ReactDOM','RelationshipDelightUtils','TextWithEntities.react','Timestamp.react','URI'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.isLiveVideo=null,this.$NotificationBeeperItemContents2=function(q){this.$NotificationBeeperItemContents1();this.props.onHide();if(q.button===1||q.altKey||q.ctrlKey||q.metaKey||q.shiftKey)return;var r=this.props.beep;c('NotificationListRendererUtils').openNotification(q,r);if(q.isDefaultPrevented()===true)return;var s=r.primerAttributes;if(s&&(s.rel==='async'||s.rel==='async-post')){var t=new (c('AsyncRequest'))(s.ajaxify||r.url);if(s.rel==='async-post')t.setMethod('POST');t.send();q.preventDefault()}else if(s&&s.rel==='theater'){q.persist();c('Bootloader').loadModules(["PhotoSnowlift"],function(u){u.bootstrap(s.ajaxify||r.url,q.currentTarget)},'NotificationBeeperItemContents.react');q.preventDefault()}else if(s&&(s.rel==='dialog'||s.rel==='dialog-post')){c('Bootloader').loadModules(["AsyncDialog"],function(u){u.bootstrap(s.ajaxify||r.url,q.currentTarget,'dialog')},'NotificationBeeperItemContents.react');q.preventDefault()}}.bind(this),this.$NotificationBeeperItemContents3=function(){this.$NotificationBeeperItemContents1();this.props.onHide()}.bind(this),m}k.prototype.$NotificationBeeperItemContents1=function(){'use strict';c('NotificationUserActions').markNotificationsAsRead([this.props.beep.notificationID])};k.prototype.$NotificationBeeperItemContents4=function(){'use strict';new (c('Animation'))(c('ReactDOM').findDOMNode(this.refs.inner)).from('opacity','0').to('opacity','1').duration(200).go()};k.prototype.$NotificationBeeperItemContents5=function(){'use strict';var l=this.$NotificationBeeperItemContents6(),m=JSON.parse(l);return m.content_id};k.prototype.$NotificationBeeperItemContents7=function(){'use strict';if(this.isLiveVideo===null){var l=this.$NotificationBeeperItemContents6();this.isLiveVideo=l.indexOf('live_video')!==-1}return !!this.isLiveVideo};k.prototype.$NotificationBeeperItemContents6=function(){'use strict';return this.props.beep.tracking||'{}'};k.prototype.$NotificationBeeperItemContents8=function(){'use strict';var l=this.props.beep,m=c('RelationshipDelightUtils').shouldHeartBeeper(l);if(!m)return null;c('RelationshipDelightUtils').logBeeperAnimation(l.notificationID);return c('React').createElement('div',{className:"_5_xp"},c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('RelationshipDelightsActorAnimation.react').__setRef('NotificationBeeperItemContents.react')}))};k.prototype.componentDidMount=function(){'use strict';this.props.onReadyToHide(this.props.beep.notificationID);if(this.$NotificationBeeperItemContents7())c('Bootloader').loadModules(["VideoPlayerMetaData","PhotoSnowliftVideoNode"],function(l,m){var n=this.$NotificationBeeperItemContents5();if(n)l.genVideoData(n);}.bind(this),'NotificationBeeperItemContents.react');};k.prototype.componentDidUpdate=function(l){'use strict';if(l.beep.beepID!==this.props.beep.beepID){this.$NotificationBeeperItemContents4();this.props.onReadyToHide(this.props.beep.notificationID)}};k.prototype.render=function(){'use strict';var l=this.props.beep,m=l.thumbnail?l.thumbnail.uri:null,n=l.icon?l.icon.uri:null,o=c('NotificationURI').localize(new (c('URI'))(l.url));return c('React').createElement('div',{ref:'inner',className:this.props.className},c('React').createElement(c('NotificationBeeperItemCloseButton.react'),{onClick:this.$NotificationBeeperItemContents3}),c('React').createElement('a',{href:o,onClick:this.$NotificationBeeperItemContents2,className:"_3soi"},c('React').createElement(c('ImageBlock.react'),{className:"_3soj",spacing:'medium'},c('React').createElement(c('FBProfilePhotoShadow.react'),{className:"_2yt7"},c('React').createElement(c('Image.react'),{src:m,className:"_3sok"+(!m?' '+"hidden_elem":'')})),c('React').createElement('div',{className:"_3sol"},c('React').createElement(c('TextWithEntities.react'),{renderEmoticons:true,renderEmoji:true,interpolator:c('NotificationInterpolator'),ranges:l.text.ranges,aggregatedranges:l.text.aggregated_ranges,text:l.text.text}),c('React').createElement(c('ImageBlock.react'),{className:"_3som"},c('React').createElement(c('Image.react'),{className:"_1x8t"+(!n?' '+"hidden_elem":''),src:n}),c('React').createElement(c('Timestamp.react'),{time:l.timestamp.time,text:l.timestamp.text,verbose:l.timestamp.verbose})))),this.$NotificationBeeperItemContents8()))};f.exports=k}),null);
__d('NotificationBeeperItem.react',['cx','CSSFade','NotificationBeeperConst','NotificationBeeperItemContents.react','NotificationBeeperItemRenderersList','React','ReactDOM','Style','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h){var i,j,k=c('NotificationBeeperConst').FADE_OUT_LENGTH;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={fadedIn:false,hidden:false},this.$NotificationBeeperItem3=function(){this.setState({hidden:true})}.bind(this),n}l.prototype.componentDidMount=function(){'use strict';c('setTimeoutAcrossTransitions')(function(){this.setState({fadedIn:true})}.bind(this),50);this.props.onInserted(this.props.beep)};l.prototype.componentWillUnmount=function(){'use strict';if(this.$NotificationBeeperItem1)this.$NotificationBeeperItem1.cancel();};l.prototype.render=function(){'use strict';var m=this.props.beep,n=this.$NotificationBeeperItem4(m.renderer_data.__typename);return c('React').createElement('li',{className:this.state.hidden?"hidden_elem":'',ref:function(o){return this.$NotificationBeeperItem2=o}.bind(this),'data-gt':m.tracking},c('React').createElement(n,{beep:m,className:"_3sod"+(this.state.fadedIn?' '+"_3soe":''),onHide:this.$NotificationBeeperItem3,onReadyToHide:this.props.onReadyToHide,onPreventHide:this.props.onPreventHide}))};l.prototype.componentDidUpdate=function(m,n,o){'use strict';if(!this.$NotificationBeeperItem2)return;var p=c('ReactDOM').findDOMNode(this.$NotificationBeeperItem2);if(!p)return;if(this.props.fadingOut){this.$NotificationBeeperItem1=c('CSSFade').hide(p,{callback:this.$NotificationBeeperItem3,duration:k});p.style.transitionDuration='0ms'}else{if(this.$NotificationBeeperItem1){this.$NotificationBeeperItem1.cancel();this.$NotificationBeeperItem1=undefined}c('Style').set(p,'opacity','1')}};l.prototype.$NotificationBeeperItem4=function(m){'use strict';return c('NotificationBeeperItemRenderersList')[m]||c('NotificationBeeperItemContents.react')};f.exports=l}),null);
__d('NotificationImpressions',['AsyncSignal','NotificationTokens','URI'],(function a(b,c,d,e,f,g){var h='/ajax/notifications/impression.php';function i(j,k){var l={ref:k};c('NotificationTokens').untokenizeIDs(j).forEach(function(m,n){l['alert_ids['+n+']']=m});new (c('AsyncSignal'))(new (c('URI'))(h).getQualifiedURI().toString(),l).send()}f.exports={log:i}}),null);
__d('SoundPlayer',['Map','URI','createArrayFromMixed'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('Map'))();function i(l){var m=new (c('URI'))(l);return m.getDomain()?l:new (c('URI'))(window.location.href).setPath(m.getPath()).toString()}function j(l){var m=new (c('URI'))(l).getPath();if(/\.mp3$/.test(m))return 'audio/mpeg';if(/\.og[ga]$/.test(m))return 'audio/ogg';return ''}var k={preload:function l(m){for(var n=c('createArrayFromMixed')(m),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q;if(h.has(r))return;var s=document.createElement('audio');if(!s||!s.canPlayType||!s.canPlayType(j(r)))continue;s.preload='auto';s.src=i(r);document.body&&document.body.appendChild(s);h.set(r,s);return}},play:function l(m){var n=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];for(var o=c('createArrayFromMixed')(m),p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++]}else{q=o.next();if(q.done)break;r=q.value}var s=r;if(!h.has(s))k.preload(s);var t=h.get(s);if(!t)continue;if(n.loop)t.setAttribute('loop','');if(n.volume)t.volume=n.volume;t.play();return}},pause:function l(m){for(var n=c('createArrayFromMixed')(m),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q,s=h.get(r);if(s){s.pause();return}}},stop:function l(m){for(var n=c('createArrayFromMixed')(m),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q,s=h.get(r);if(s){s.pause();s.removeAttribute('src');s.src=i(r);return}}}};f.exports=k}),null);
__d('SoundSynchronizer',['SoundPlayer','WebStorage','createArrayFromMixed'],(function a(b,c,d,e,f,g){var h='fb_sounds_playing3';function i(){var m=c('WebStorage').getLocalStorage();if(m)try{var n=m[h];if(n){n=JSON.parse(n);if(Array.isArray(n))return n;}}catch(o){}return []}function j(m){var n=c('WebStorage').getLocalStorage();if(n){var o=i();o.push(m);while(o.length>5)o.shift();try{n[h]=JSON.stringify(o)}catch(p){}}}function k(m){return i().some(function(n){return n===m})}var l={play:function m(n,o,p){n=c('createArrayFromMixed')(n);o=o||n[0]+Math.floor(Date.now()/1000);if(k(o))return;c('SoundPlayer').play(n,{loop:!!p});j(o)},isSupported:function m(){return !!c('WebStorage').getLocalStorage()}};f.exports=l}),null);
__d('SoundRPC',['Event','FBJSON','SoundSynchronizer'],(function a(b,c,d,e,f,g){function h(j,k,l){c('SoundSynchronizer').play(j,k,l)}var i={playLocal:h,playRemote:function j(k,l,m,n){var o={name:'SoundRPC',data:{paths:l,sync:m,loop:n}};k.postMessage(c('FBJSON').stringify(o),'*')},supportsRPC:function j(){return !!window.postMessage},_listen:function j(){c('Event').listen(window,'message',function(k){if(!/\.facebook.com$/.test(k.origin))return;var l={};try{l=c('FBJSON').parse(k.data)}catch(m){}if(l.name==='SoundRPC')h(l.data.paths,l.data.sync,l.data.loop);})}};f.exports=i}),null);
__d('Sound',['SoundInitialData','SoundPlayer','SoundRPC','SoundSynchronizer','URI','UserAgent_DEPRECATED','Visibility','isFacebookURI'],(function a(b,c,d,e,f,g){var h=null,i=false,j={init:function n(o){},play:function n(o,p,q){if(h){c('SoundRPC').playRemote(h.contentWindow,o,p,false)}else c('SoundRPC').playLocal(o,p,q);i=true},hasPlayedSoundBefore:function n(){return i},playOnlyIfImmediate:function n(o,p,q){if(!i&&c('Visibility').isHidden())return;this.play(o,p,q)},stop:function n(o){if(!h)c('SoundPlayer').stop(o);}},k=new (c('URI'))(location.href);if(k.getSubdomain()&&k.getSubdomain()!=='www')k.setSubdomain('www');var l=k.getDomain();function m(){if(c('UserAgent_DEPRECATED').ie()<9)return false;if(c('SoundInitialData').RPC_DISABLED)return false;return c('SoundSynchronizer').isSupported()&&c('SoundRPC').supportsRPC()}if(c('isFacebookURI')(k)&&location.host!==l&&m()){h=document.createElement('iframe');h.setAttribute('src','//'+l+'/sound_iframe.php');h.style.display='none';document.body.appendChild(h)}f.exports=j}),null);
__d('NotificationSound',['Sound'],(function a(b,c,d,e,f,g){var h=5000;c('Sound').init(['audio/mpeg']);function i(j){this._soundPath=j;this._lastPlayed=0}Object.assign(i.prototype,{play:function j(k){if(!this._soundPath)return;var l=Date.now();if(l-this._lastPlayed<h)return;this._lastPlayed=l;c('Sound').playOnlyIfImmediate(this._soundPath,k)}});f.exports=i}),null);
__d('NotificationBeeper.react',['cx','Arbiter','ChannelConstants','NotificationBeepData','NotificationBeeperConst','NotificationBeeperItem.react','NotificationBeeperPinnedPostLoader','NotificationConstants','NotificationImpressions','NotificationSound','NotificationUpdates','NotificationUserActions','NotifTestIDs','React','SubscriptionsHandler','WorkFocusModeController','setTimeoutAcrossTransitions','shield'],(function a(b,c,d,e,f,g,h){var i,j,k=c('WorkFocusModeController').WorkFocusMode,l=c('NotificationBeeperConst').ACTIVE_DELAY_LONG,m=c('NotificationBeeperConst').BeepStates,n=c('NotificationBeeperConst').FADE_OUT_LENGTH,o=c('NotificationBeeperConst').IDLE_DELAY,p=c('NotificationBeeperPinnedPostLoader').payload,q='beeper',r=c('NotificationConstants').PayloadSourceType,s=r.LIVE_SEND,t=r.OTHER_APPLICATION,u=r.CLIENT;i=babelHelpers.inherits(v,c('React').Component);j=i&&i.prototype;function v(){var w,x;'use strict';for(var y=arguments.length,z=Array(y),aa=0;aa<y;aa++)z[aa]=arguments[aa];return x=(w=j.constructor).call.apply(w,[this].concat(z)),this.state={soundEnabled:this.props.soundEnabled,hovering:false,fading:false,beeps:{}},this.onMouseEnter=function(){this.$NotificationBeeper2&&clearTimeout(this.$NotificationBeeper2);var ba=[],ca=this.state.beeps;Object.keys(ca).forEach(function(da){if(ca[da].state!=m.PENDING){ba.push(da)}else ca[da].state=m.RENDERED;});c('NotificationUserActions').markNotificationsAsSeen(ba);this.setState({hovering:true,fading:false,beeps:ca})}.bind(this),this.onMouseLeave=function(){this.$NotificationBeeper5(l);this.setState({hovering:false})}.bind(this),this.$NotificationBeeper6=function(ba){if(!this.state.hovering)this.$NotificationBeeper5();if(this.state.soundEnabled&&ba.sound){if(!this.$NotificationBeeper3)this.$NotificationBeeper3=new (c('NotificationSound'))(this.props.soundPath);this.$NotificationBeeper3.play(ba.beepID)}if(this.props.shouldLogImpressions)c('NotificationImpressions').log([ba.notificationID],q);}.bind(this),this.onReadyToHide=function(ba,ca){this.state.beeps[ba].state=m.READY_TO_HIDE;if(!this.$NotificationBeeper2)this.$NotificationBeeper5(ca);}.bind(this),this.$NotificationBeeper8=function(ba){this.state.beeps[ba].state=m.RENDERED}.bind(this),this.$NotificationBeeper7=function(){this.$NotificationBeeper2=null;var ba=this.state.beeps;Object.keys(ba).forEach(function(ca){if(ba[ca].state==m.READY_TO_HIDE)ba[ca].state=m.FADING_OUT;});this.setState({fading:true});c('setTimeoutAcrossTransitions')(c('shield')(this.$NotificationBeeper9,this),n)}.bind(this),this.$NotificationBeeper9=function(){if(!this.state.fading)return;var ba=this.state.beeps;Object.keys(ba).forEach(function(ca){if(ba[ca].state==m.FADING_OUT)delete ba[ca];});this.setState({fading:false,beeps:ba});c('setTimeoutAcrossTransitions')(function(){var ca=this.state.beeps;Object.keys(ca).forEach(function(da){if(ca[da].state==m.PENDING)ca[da].state=m.RENDERED;});this.setState({beeps:ca})}.bind(this))}.bind(this),x}v.prototype.componentWillMount=function(){'use strict';this.$NotificationBeeper1=new (c('SubscriptionsHandler'))();this.$NotificationBeeper1.addSubscriptions(c('NotificationUpdates').subscribe('update-notifications',function(w,x){if(x.payloadsource===s||x.payloadsource===t||x.payloadsource===u){var y=x.nodes;if(y&&y.length){if(k&&k.currentViewerInFocusMode())return;this.handleBeepChanges(this.$NotificationBeeper4(y))}}}.bind(this)),c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('notif_sound_pref_changed'),function(w,x){this.setState({soundEnabled:x.obj.enabled})}.bind(this)));c('Arbiter').inform('NotificationBeeper/mounted',null,c('Arbiter').BEHAVIOR_PERSISTENT);if(p)this.handleBeepChanges(this.$NotificationBeeper4(p.nodes));};v.prototype.componentWillUnmount=function(){'use strict';if(this.$NotificationBeeper1)this.$NotificationBeeper1.release();this.$NotificationBeeper1=null};v.prototype.$NotificationBeeper5=function(w){'use strict';this.$NotificationBeeper2&&clearTimeout(this.$NotificationBeeper2);this.$NotificationBeeper2=c('setTimeoutAcrossTransitions')(c('shield')(this.$NotificationBeeper7,this),w==null?o:w)};v.prototype.handleBeepChanges=function(w){'use strict';var x=this.state.fading?m.PENDING:m.RENDERED,y=this.state.beeps,z=false;Object.keys(w).reverse().forEach(function(aa){var ba={state:x,data:w[aa]};if(!y[aa]||y[aa].data.beepID!=ba.data.beepID){if(y[aa]){z=true;if(ba.data.beepUpdatesOnTop)delete y[aa];}y[aa]=ba}});if(z)this.$NotificationBeeper5();this.forceUpdate()};v.prototype.render=function(){'use strict';var w=this.state.beeps,x=[];Object.keys(w).reverse().forEach(function(aa){var ba=w[aa];if(ba.state==m.PENDING)return;x.push(c('React').createElement(c('NotificationBeeperItem.react'),{key:aa,fadingOut:this.state.fading&&ba.state==m.FADING_OUT,beep:ba.data,onInserted:this.$NotificationBeeper6,onReadyToHide:this.onReadyToHide,onPreventHide:this.$NotificationBeeper8}))},this);var y=x.length>0,z=(!y?"hidden_elem":'')+(' '+"_50d1");return c('React').createElement('ul',{ref:'container',className:z,'data-gt':this.props.tracking,'data-testid':c('NotifTestIDs').BEEPER_LIST,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},x)};v.prototype.$NotificationBeeper4=function(w){'use strict';return w.reduce(function(x,y){var z=c('NotificationBeepData').fromNotification(y);if(z)x[y.alert_id]=z;return x},{})};f.exports=v}),null);
__d('NotificationBeeperContainer',['NotificationBeeper.react','React','ReactDOM'],(function a(b,c,d,e,f,g){var h={renderBeeper:function i(j,k){c('ReactDOM').render(c('React').createElement(c('NotificationBeeper.react'),j),k)}};f.exports=h}),null);
__d('LiveVideoBeeperItemContents.react',['BootloadOnRender.react','JSResource','LazyComponent.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){return c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('LiveVideoBeeperItemContentsImpl.react').__setRef('LiveVideoBeeperItemContents.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),babelHelpers['extends']({},this.props,{ref:'itemContents'}))})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("ConversationNubAddTabSource",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NOTIFICATION:"notification",PAGE_REFRESH:"page_refresh",USER_PIN:"user_pin",UNSEEN_NOTIFICATION:"unseen_notification",UNKNOWN:"unknown"})}),null);
__d('ConversationNotificationListeners',['Bootloader','ConversationNubAddTabSource','NotificationConstants','NotificationUpdates','PinnedConversationNubsConfig','once'],(function a(b,c,d,e,f,g){'use strict';var h=c('NotificationConstants').PayloadSourceType,i=h.LIVE_SEND,j=h.OTHER_APPLICATION,k=c('once')(function(){var l='update-notifications';c('NotificationUpdates').subscribe(l,function(m,n){var o;if(c('PinnedConversationNubsConfig').sharedNotificationsReadStateEnabled&&n.payloadsource===i&&n.readState&&Object.keys(n.readState).length){c('Bootloader').loadModules(["NotificationConversationController"],function(p){p.handleNotificationsRead(n.readState)},'ConversationNotificationListeners')}else if(n.payloadsource===i||n.payloadsource===j)(function(){var p=n.nodes,q=p&&p.length&&p.some(function(r){return r.pinnedConvoConfig});if(q)c('Bootloader').loadModules(["NotificationConversationController"],function(r){r.handleNewNotifications(p,c('ConversationNubAddTabSource').NOTIFICATION)},'ConversationNotificationListeners');})();})});f.exports={initialize:function l(){k()}}}),null);
__d('Dock',['csx','Event','shield','Arbiter','ArbiterMixin','BlueBar','ChatQuietLinks','CSS','DataStore','DOM','Parent','Scroll','Style','Toggler','Vector','emptyFunction'],(function a(b,c,d,e,f,g,h){function i(){}Object.assign(i,c('ArbiterMixin'),{MIN_HEIGHT:140,INITIAL_FLYOUT_HEIGHT_OFFSET:10,init:function j(k){this.init=c('emptyFunction');this.rootEl=k;this.calculateViewportDimensions();c('ChatQuietLinks').removeEmptyHrefs(this.rootEl);c('Event').listen(k,'click',this._onClick.bind(this));c('Event').listen(window,'resize',this._onWindowResize.bind(this));c('Toggler').subscribe(['show','hide'],function(l,m){var n=m.getActive();if(!c('DOM').contains(k,n))return;if(c('CSS').hasClass(n,'fbNub')){this.notifyNub(n,l);if(l==='show')this._resizeNubFlyout(n);}else{var o=c('Parent').byClass(n,'fbNubFlyout');if(o)c('CSS').conditionClass(o,'menuOpened',l==='show');}}.bind(this));this.inform('init',{},c('Arbiter').BEHAVIOR_PERSISTENT)},calculateViewportDimensions:function j(){return this.viewportDimensions=c('Vector').getViewportDimensions()},getFlyoutHeightOffset:function j(){if(this.flyoutHeightOffset)return this.flyoutHeightOffset;this.flyoutHeightOffset=this.INITIAL_FLYOUT_HEIGHT_OFFSET+c('Vector').getElementDimensions(this.rootEl).y;var k=c('BlueBar').getBar();if(k){var l=c('Style').isFixed(k)?'viewport':'document';this.flyoutHeightOffset+=c('Vector').getElementPosition(k,l).y+c('Vector').getElementDimensions(k).y}return this.flyoutHeightOffset},toggle:function j(k){var l=this._findFlyout(k);if(!l)return;this.subscribe('init',function(){c('Toggler').toggle(k)})},show:function j(k){this.subscribe('init',function(){c('Toggler').show(k)})},showNub:function j(k){c('CSS').show(k)},hide:function j(k){this.subscribe('init',function(){var l=c('Toggler').getInstance(k);c('DOM').contains(k,l.getActive())&&l.hide()})},hideNub:function j(k){c('CSS').hide(k);this.hide(k)},setUseMaxHeight:function j(k,l){c('CSS').conditionClass(k,'maxHeight',l!==false);this._resizeNubFlyout(k)},_resizeNubFlyout:function j(k){var l=this._findFlyout(k);if(!l||c('CSS').hasClass(k,'placeholder')||!(c('CSS').hasClass(k,'openToggler')||c('CSS').hasClass(k,'opened')))return;var m=c('DOM').find(l,'div.fbNubFlyoutOuter'),n=c('DOM').find(m,'div.fbNubFlyoutInner'),o=c('DOM').find(n,'div.fbNubFlyoutBody'),p=c('CSS').hasClass(k,'canBeCompactTab'),q=c('Scroll').getTop(o),r=o.offsetHeight;c('Style').set(o,'height','auto');var s=c('Vector').getElementDimensions(l),t=c('Vector').getElementDimensions(o),u=this.getMaxFlyoutHeight(k);c('Style').set(l,'max-height',u+'px');c('Style').set(m,'max-height',u+'px');s=c('Vector').getElementDimensions(l);var v=c('Vector').getElementDimensions(n),w=v.y-t.y,x=s.y-w,y=parseInt(o.style.height||o.clientHeight,10),z=x!==y;if(s.y>w&&z&&!p)c('Style').set(o,'height',x+'px');c('CSS').removeClass(l,'swapDirection');var aa=c('Vector').getElementPosition(l).x;c('CSS').conditionClass(l,'swapDirection',function(){if(aa<0)return true;if(!s||!this.viewportDimensions)return false;return aa+s.x>this.viewportDimensions.x}.bind(this)());if(z&&q+r>=t.y){c('Scroll').setTop(o,o.scrollHeight)}else c('Scroll').setTop(o,q);this.notifyNub(k,'resize')},getMaxFlyoutHeight:function j(k){var l=this._findFlyout(k),m=c('Vector').getElementPosition(l,'viewport'),n=c('Vector').getElementDimensions(l);if(!this.viewportDimensions||!m)return 0;var o=Math.max(this.MIN_HEIGHT,this.viewportDimensions.y-this.getFlyoutHeightOffset())-(this.viewportDimensions.y-m.y-n.y);return Math.max(o,0)},resizeAllFlyouts:function j(){var k=this._getAllNubs(),l=k.length;while(l--)this._resizeNubFlyout(k[l]);},hideAllFlyouts:function j(){var k=this._getAllNubs(),l=k.length;while(l--)this.hide(k[l]);},_getAllNubs:function j(){var k=c('DOM').scry(this.rootEl,"div._50-v.openToggler");return k.concat(c('DOM').scry(this.rootEl,"div._50-v.opened"))},_onClick:function j(event){var k=event.getTarget(),l=c('Parent').byClass(k,'fbNub');if(l){if(c('Parent').byClass(k,'fbNubFlyoutTitlebar')){var m=c('Parent').byTag(k,'a'),n=k.nodeName=='INPUT'&&k.getAttribute('type')=='submit';if(!m&&!n){this.hide(l);return false}}this.notifyNub(l,'click')}},_onWindowResize:function j(event){this.calculateViewportDimensions();this.resizeAllFlyouts()},_findFlyout:function j(k){return c('CSS').hasClass(k,'fbNubFlyout')?k:c('DOM').scry(k,'div.fbNubFlyout')[0]||null},registerNubController:function j(k,l){c('DataStore').set(k,'dock:nub:controller',l);l.subscribe('nub/button/content-changed',c('shield')(this.inform,this,'resize',k));l.subscribe('nub/flyout/content-changed',c('shield')(this._resizeNubFlyout,this,k))},unregisterNubController:function j(k){c('DataStore').remove(k,'dock:nub:controller')},notifyNub:function j(k,l,m){var n=c('DataStore').get(k,'dock:nub:controller');n&&n.inform(l,m)}});f.exports=b.Dock||i}),null);
__d('FBPaymentsDispatcher',['ExplicitRegistrationReactDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationReactDispatcher'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this)}f.exports=new j({strict:false})}),null);
__d('FBPaymentsDialogActions',['FBPaymentsDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h={types:c('keyMirror')({SHOW_DIALOG:null,HIDE_DIALOG:null}),showDialog:function i(j,k){c('FBPaymentsDispatcher').dispatch({type:h.types.SHOW_DIALOG,data:{dialogClass:j,dialogProps:k}})},hideDialog:function i(){c('FBPaymentsDispatcher').dispatch({type:h.types.HIDE_DIALOG,data:{}})}};f.exports=h}),null);
__d('FBPaymentsDialogContainerMount',['FBPaymentsDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('FBPaymentsDialogContainer.react'),null),j)}};f.exports=h}),null);
__d('ChatAppActionTypes',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('keyMirror')({INITIAL_DISPLAY_DONE:null,HIDE:null,LOAD:null,TTI:null,UNHIDE:null})}),null);
__d('ChatAppStore',['ChatAppActionTypes','ChatDispatcher','FluxStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('ChatDispatcher'));this.$ChatAppStore2={initialDisplayDone:false,isHidden:false,isInitialized:false,isLoaded:false};this.$ChatAppStore1=babelHelpers['extends']({},this.$ChatAppStore2)}j.prototype.__onDispatch=function(k){var l=k.type;this.$ChatAppStore1=babelHelpers['extends']({},this.$ChatAppStore2);switch(l){case c('ChatAppActionTypes').INITIAL_DISPLAY_DONE:this.$ChatAppStore2.initialDisplayDone=true;this.__emitChange();break;case c('ChatAppActionTypes').HIDE:this.$ChatAppStore2.isHidden=true;this.__emitChange();break;case c('ChatAppActionTypes').UNHIDE:this.$ChatAppStore2.isHidden=false;this.__emitChange();break;case c('ChatAppActionTypes').TTI:this.$ChatAppStore2.isInitialized=this.$ChatAppStore2.isLoaded=true;this.__emitChange();break;case c('ChatAppActionTypes').LOAD:this.$ChatAppStore2.isLoaded=true;this.__emitChange();break;}};j.prototype.getPreviousState=function(){return this.$ChatAppStore1};j.prototype.getState=function(){return this.$ChatAppStore2};f.exports=new j()}),null);
__d('ChatTimezoneWarning',['MercuryParticipants','MercuryViewer','MessengerBotIDs'],(function a(b,c,d,e,f,g){'use strict';var h=1,i={updateUserTimezoneWarning:function j(k,l,m){c('MercuryParticipants').get(c('MercuryViewer').getID(),function(n){var o=n.employee,p=n.timezone,q=0;if(k.timezone_warning_dismiss_count!==undefined){var r=k.timezone_warning_dismiss_count;for(var s=Object.entries(r),t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var v;if(t){if(u>=s.length)break;v=s[u++]}else{u=s.next();if(u.done)break;v=u.value}var w=v,x=w[0],y=w[1];if(x===n.fbid)q=Number(y);}}else return;if(o&&p&&q<h)c('MercuryParticipants').getMulti(k.participants,function(z){var aa={},ba=true;for(var ca in z){ba=ba&&z[ca].employee;var da=!!c('MessengerBotIDs')[z[ca].fbid];if(z[ca].timezone!==undefined&&z[ca].timezone!==null&&p!==z[ca].timezone&&!da){var ea=z[ca].fbid;aa[ea]=z[ca]}}if(Object.keys(aa).length>0&&ba){aa.self=n;l(aa)}else m();});})}};f.exports=i}),null);
__d('WorkDualityDismissWarning',[],(function a(b,c,d,e,f,g){'use strict';var h={},i={};f.exports={isWarningAcknowledged:function j(k){if(h[k])return true;return false},acknowledgeWarning:function j(k){h[k]=true},isThreadHijacked:function j(k){if(i[k])return true;return false},setHijackedThread:function j(k){i[k]=true}}}),null);
__d('ChatUserPersonalUserWarning',['MercuryIDs','MercuryParticipants','MercuryViewer','MercuryEmployeeDualityPreferences','WorkDualityDismissWarning'],(function a(b,c,d,e,f,g){var h=1,i={updateEmployeePersonalUserWarning:function j(k,l,m){c('MercuryParticipants').get(c('MercuryViewer').getID(),function(n){var o=this._getFriendID(k,n);if(!o){m();return}c('MercuryParticipants').getMulti(k.participants,function(p){var q=this._getParticipant(k,Object.values(p),o);if(q){l(n,q)}else m();}.bind(this))}.bind(this))},getEmployeePersonalUserWarning:function j(k){var l=c('MercuryParticipants').getNow(c('MercuryViewer').getID()),m=this._getFriendID(k,l),n=k.participants.map(function(p){return c('MercuryParticipants').getNow(p)}),o=this._getParticipant(k,n,m);return {myself:l,participant:o}},_getParticipant:function j(k,l,m){var n=null;l.forEach(function(o){if(o.personal_id&&m===o.personal_id&&o.work_id&&o.employee&&!c('WorkDualityDismissWarning').isWarningAcknowledged(k.thread_id))n=o;});return n},_getFriendID:function j(k,l){var m=l.employee,n=null;if(l.personal_id)n='fbid:'+l.personal_id;var o=n===l.id,p=0;if(k.work_user_warning_dismiss_count!==undefined){var q=k.work_user_warning_dismiss_count;for(var r=Object.entries(q),s=Array.isArray(r),t=0,r=s?r:r[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var u;if(s){if(t>=r.length)break;u=r[t++]}else{t=r.next();if(t.done)break;u=t.value}var v=u,w=v[0],x=v[1];if(w===l.fbid)p=Number(x);}}else return null;var y=c('MercuryIDs').getUserIDFromThreadID(k.thread_id);if(!m||!o||!y||k.participants.length>2||!c('MercuryEmployeeDualityPreferences').duality_warning_gk_check||p>=h)return null;return y}};f.exports=i}),null);
__d('ChatUserWorkUserWarning',['MercuryIDs','MercuryParticipants','MercuryViewer','MercuryEmployeeDualityPreferences','WorkDualityDismissWarning'],(function a(b,c,d,e,f,g){var h=1,i={updateEmployeeWorkUserWarning:function j(k,l,m){c('MercuryParticipants').get(c('MercuryViewer').getID(),function(n){var o=this._getFriendID(k,n);if(!o){m();return}c('MercuryParticipants').getMulti(k.participants,function(p){var q=this._getParticipant(k,Object.values(p),o);if(q){l(n,q)}else m();}.bind(this))}.bind(this))},getEmployeeWorkUserWarning:function j(k){var l=c('MercuryParticipants').getNow(c('MercuryViewer').getID()),m=this._getFriendID(k,l),n=k.participants.map(function(p){return c('MercuryParticipants').getNow(p)}),o=this._getParticipant(k,n,m);return {myself:l,participant:o}},_getParticipant:function j(k,l,m){var n=null;l.forEach(function(o){if(o.work_id&&m===o.work_id.toString()&&o.personal_id&&c('WorkDualityDismissWarning').isThreadHijacked(k.thread_id)&&o.employee&&!o.is_friend)n=o;});return n},_getFriendID:function j(k,l){var m=l.employee,n=null;if(l.personal_id)n='fbid:'+l.personal_id;var o=n===l.id,p=0;if(k.work_user_warning_dismiss_count!==undefined){var q=k.work_user_warning_dismiss_count;for(var r=Object.entries(q),s=Array.isArray(r),t=0,r=s?r:r[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var u;if(s){if(t>=r.length)break;u=r[t++]}else{t=r.next();if(t.done)break;u=t.value}var v=u,w=v[0],x=v[1];if(w===l.fbid)p=Number(x);}}else return null;var y=c('MercuryIDs').getUserIDFromThreadID(k.thread_id);if(!m||!o||!y||k.participants.length>2||!c('MercuryEmployeeDualityPreferences').duality_warning_gk_check||p>=h)return null;return y}};f.exports=i}),null);
__d('FantaAvailableStatus',['AvailableListConstants','ChatVisibility','MercuryIDs','PresenceStatus','ShortProfiles'],(function a(b,c,d,e,f,g){'use strict';f.exports={isAvailable:function h(i,j){var k=void 0,l=this.getStatus(i,j),m=c('MercuryIDs').getUserIDFromThreadID(j);if(m)k=c('ShortProfiles').getNow(m);return l===c('AvailableListConstants').ACTIVE&&(k===undefined||k===null||!k.is_messenger_only)},getStatus:function h(i,j){var k=c('AvailableListConstants').OFFLINE,l=c('MercuryIDs').getUserIDFromThreadID(j);if(l){k=c('PresenceStatus').get(l)}else if(i){var m=i.participants.map(function(n){return c('MercuryIDs').getUserIDFromParticipantID(n)});k=c('PresenceStatus').getGroup(m)}if(!c('ChatVisibility').isOnline())k=c('AvailableListConstants').OFFLINE;return k}}}),null);
__d('ChatVideoCallButton.react',['cx','fbt','invariant','Bootloader','FantaAvailableStatus','FBID','FBRTCCallabilityStore','FBRTCCore','immutable','ImmutableObject','Keys','LayerFadeOnHide','Link.react','MercuryIDs','MercuryParticipants','MercuryThreadIDMap','ReactComponentWithPureRenderMixin','React','RTCCallState','RTCConfig','StoreAndPropBasedStateMixin','TrackingNodes','FBRTCLogger','VideoCallTypedLogger','XUIAmbientNUX.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('MercuryThreadIDMap').get(),l=c('FBRTCLogger').Trigger,m=c('React').PropTypes,n={isCallable:false,shown:false,user:null},o=c('React').createClass({displayName:'ChatVideoCallButton',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('FBRTCCallabilityStore'),c('MercuryParticipants'))],propTypes:{isAudio:m.bool,isGroupChat:m.bool,onRTCNuxCloseButtonClick:m.func.isRequired,rtcNuxShown:m.bool.isRequired,threadID:m.string,thread:m.object,viewer:m.string.isRequired,shown:m.bool,rtcCallData:m.object.isRequired},getDefaultProps:function p(){return {shown:true,rtcCallData:{call_state:'NO_ONGOING_CALL'}}},statics:{calculateState:function p(q){if(!q.threadID)return babelHelpers['extends']({},n);if(q.isGroupChat)return {isCallable:true,shown:q.shown,user:null};var r=c('MercuryIDs').getUserIDFromThreadID(q.threadID);if(r===q.viewer||!c('FBID').isUser(r))return babelHelpers['extends']({},n);r&&c('FBID').isUser(r)||j(0);var s=c('MercuryIDs').getParticipantIDFromUserID(r),t=c('MercuryParticipants').getOrFetch(s),u=q.thread?q.thread.folder==='inbox':true;return {isCallable:c('FBRTCCallabilityStore').isCallable(r)&&u,shown:q.shown,user:t}}},getTooltipLabel:function p(){if(this.props.isGroupChat)return this.props.isAudio?i._("Start a group call"):i._("Start a group video chat");var q=this.state.user;if(!q)return undefined;var r=this.props.thread?this.props.thread.folder==='inbox':true;return this.props.isAudio?c('FBRTCCallabilityStore').voiceCallButtonTooltip(q.fbid,q.short_name,r):c('FBRTCCallabilityStore').callButtonTooltip(q.fbid,q.short_name,r)},render:function p(){if(!this.state.shown)return null;var q=c('TrackingNodes').getTrackingInfo(this.props.isAudio?c('TrackingNodes').types.VIDEOCHAT:c('TrackingNodes').types.VOICECHAT),r=JSON.stringify({videochat:'call_clicked_bhat_tab'}),s=this.props.threadID&&c('FantaAvailableStatus').isAvailable(this.props.thread,this.props.threadID),t=s&&this.state.isCallable&&c('RTCConfig').RtcActiveUserCallability;return c('React').createElement('div',null,c('React').createElement(c('Link.react'),{'aria-label':this.getTooltipLabel(),className:"button"+(' '+"_3olv")+(this.props.isAudio?' '+"_2fpc":'')+(!this.props.isAudio?' '+"_2fpd":'')+(this.state.isCallable||c('RTCConfig').RtcActiveUserCallability?' '+"enabled":''),'data-ft':q,'data-gt':r,'data-hover':'tooltip','data-tooltip-content':this.getTooltipLabel(),'data-tooltip-position':'above',onClick:this._handleClick,onKeyUp:this._handleKeyUp,ref:'button'}),c('React').createElement('div',{className:t&&!this.props.isAudio?"_18pe":''}),c('React').createElement(c('XUIAmbientNUX.react'),{alignment:'right',behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},contextRef:function(){return this.refs.button}.bind(this),onCloseButtonClick:this.props.onRTCNuxCloseButtonClick,shown:this.props.rtcNuxShown,width:'auto'},i._("You can now make a group call.")))},_handleClick:function p(q){q.preventDefault();if(!this.state.isCallable&&!c('RTCConfig').RtcActiveUserCallability)return;this.props.onRTCNuxCloseButtonClick();this._initiateCall()},_handleKeyUp:function p(q){q.preventDefault();if(q.keyCode!==c('Keys').RETURN||!this.state.isCallable)return;if(q.target){q.target instanceof HTMLElement||j(0);q.target.blur()}this._initiateCall()},_initiateCall:function p(){var q=this.props,r=q.isAudio,s=q.isGroupChat,t=q.threadID;!!t||j(0);var u=r?'audio':'video';if(s){if(c('MercuryIDs').isLocalThread(t)){k.getServerIDFromClientID(t,function(v){return this._initiateGroupCall(v)}.bind(this))}else this._initiateGroupCall(c('MercuryIDs').getThreadFBIDFromThreadID(t));}else{c('FBRTCCore').startOutgoingCall(this.state.user.fbid,u,!!r);new (c('VideoCallTypedLogger'))().setEvent('chat_tab_call_click').log()}},_initiateGroupCall:function p(q){var r=this.props,s=r.isAudio,t=r.rtcCallData,u=t.call_state,v=t.server_info_data;if(u!=='NO_ONGOING_CALL'&&v){c('FBRTCCore').startGroupCall({conferenceName:'GROUP:'+q,hasVideo:!s,serverInfoData:v,trigger:u!==c('RTCCallState').AUDIO_GROUP_CALL?s?l.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:l.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:s?l.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON:l.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON});return}c('Bootloader').loadModules(["FBRTCSupport","MercuryThreads","messengerParticipantsFetcherRe","MessengerRTCGroupCallUnsupportedBrowserDialogController","MessengerRTCGroupCallParticipantsPickerDialogController"],function(w,x,y,z,aa){if(!w.isGroupCallWebtrcSupported()){z.render({hasVideo:!this.props.isAudio});return}x.get().getThreadMeta(this.props.threadID,function(ba){var ca=ba.participants?ba.participants.filter(function(da){return da!==c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer)}.bind(this)).map(function(da){return c('MercuryIDs').getUserIDFromParticipantID(da)}):[];if(ca.length>0)y.fetch({ids:ca}).done(function(da){aa.render({participants:c('immutable').Map(da.map(function(ea){return [ea.id,new (c('ImmutableObject'))(ea)]})),thread:ba,viewerID:this.props.viewer,trigger:this.props.isAudio?l.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON:l.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON,conferenceName:'GROUP:'+q,hasVideo:!this.props.isAudio})}.bind(this));}.bind(this))}.bind(this),'ChatVideoCallButton.react')}});f.exports=o}),null);
__d('MercuryTypeaheadDataSource',['CurrentUser','DataSource','MercuryConfig','MercuryParticipantTypes','MercuryTypeaheadConstants','OrderedFriendsList','ShortProfiles','WorkModeConfig'],(function a(b,c,d,e,f,g){var h,i,j=[],k={},l={},m={},n=[],o=false,p=false;h=babelHelpers.inherits(q,c('DataSource'));i=h&&h.prototype;function q(r){'use strict';r=r||{};r.kanaNormalization=true;i.constructor.call(this,r);this.showDefaultList=r.showDefaultList||false}q.prototype.dirty=function(){'use strict';this.$MercuryTypeaheadDataSource1=j;this.localCache=l;this.queryCache=k;this.queryIDs=m;this.defaultList=n;return this};q.prototype.bootstrap=function(){'use strict';if(o||p)return false;p=true;c('ShortProfiles').fetchAll().then(function(){this.updateBootstrapData();p=false;o=true;if(this.showDefaultList)this.inform('show-default');}.bind(this),function(){}.bind(this));return true};q.prototype.updateBootstrapData=function(){'use strict';var r=this.getCachedShortProfileIDs(),s=c('WorkModeConfig').is_work_user?c('MercuryParticipantTypes').FB4C:c('MercuryParticipantTypes').FRIEND,t=r.map(function(v){var w=c('ShortProfiles').getNow(v),x=v==c('CurrentUser').getID()?s:w.type,y=[w.additionalName,w.alternateName].concat(w.searchTokens||[]).join(' '),z=w.name,aa=null;return {uid:v,index:c('OrderedFriendsList').getActiveRank(v),text:z,subtext:aa,tokens:y,localized_text:w.name,additional_text:w.additionalName,photo:w.thumbSrc,render_type:x,type:c('MercuryTypeaheadConstants').USER_TYPE}});if(t.length)this.addEntries(t);if(!this.showDefaultList)return;var u=t.sort(function(v,w){return v.index-w.index}).slice(0,5);n=this.buildData(u.map(function(v){return v.uid}));this.defaultList=n};q.prototype.query=function(r,s,t,u){'use strict';var v=s||r.length===1;return i.query.call(this,r,v,t,u)};q.prototype.getQueryData=function(r,s){'use strict';return babelHelpers['extends']({},i.getQueryData.call(this,r,s))};q.prototype.setEntry=function(r,s){'use strict';this.$MercuryTypeaheadDataSource1[r]=s};q.prototype.getEntry=function(r){'use strict';return this.$MercuryTypeaheadDataSource1[r]||null};q.prototype.getCachedShortProfileIDs=function(){'use strict';var r=c('ShortProfiles').getCachedProfileIDs(),s=r.filter(function(t){var u=c('ShortProfiles').getNow(t);return t==c('CurrentUser').getID()||u.type===c('MercuryParticipantTypes').FRIEND||u.type===c('MercuryParticipantTypes').FB4C||u.type===c('MercuryParticipantTypes').PAGE&&c('MercuryConfig').LinkedAgents&&c('MercuryConfig').LinkedAgents.indexOf(t.toString())>-1});return s};q.prototype.isBootstrapped=function(){'use strict';return o};q.prototype.isBootstrapping=function(){'use strict';return p};q.prototype.processEntries=function(r,s){'use strict';r=r.map(function(t){if(t.index==null&&(t.render_type===c('MercuryParticipantTypes').FRIEND||t.render_type===c('MercuryParticipantTypes').FB4C))t.index=c('OrderedFriendsList').getActiveRank(t.uid);if(t.render_type===c('MercuryParticipantTypes').PAGE&&c('MercuryConfig').LinkedAgents&&c('MercuryConfig').LinkedAgents.indexOf(t.uid.toString())>-1)t.index=1;return t});return i.processEntries.call(this,r)};q.prototype.mergeUids=function(r,s,t,u){'use strict';var v=s.sort(function(w,x){return this.getEntry(w).index-this.getEntry(x).index}.bind(this));return i.mergeUids.call(this,r,v,t,u)};q.prototype.setShowDefaultList=function(r){'use strict';this.showDefaultList=r};f.exports=q}),null);
__d('ChatTabTypeaheadDataSource',['MercuryConfig','MercuryTypeaheadConstants','MercuryTypeaheadDataSource'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('MercuryTypeaheadDataSource'));i=h&&h.prototype;function j(k){'use strict';k=k||{};k.maxResults=c('MercuryTypeaheadConstants').COMPOSER_CHATTAB_MAX;i.constructor.call(this,k);this.$ChatTabTypeaheadDataSource1=true}j.prototype.buildData=function(k){'use strict';var l=[],m=[],n=[],o=[],p=[],q=[],r=[];k.forEach(function(t){var u=i.getEntry.call(this,t);switch(u.render_type){case c('MercuryTypeaheadConstants').FRIEND_TYPE:l.push(t);break;case c('MercuryTypeaheadConstants').THREAD_TYPE:if(this.$ChatTabTypeaheadDataSource1)m.push(t);break;case c('MercuryTypeaheadConstants').NON_FRIEND_TYPE:n.push(t);break;case c('MercuryTypeaheadConstants').FB4C_TYPE:o.push(t);break;case c('MercuryTypeaheadConstants').PAGE_TYPE:if(this.$ChatTabTypeaheadDataSource1)if(c('MercuryConfig').LinkedAgents&&c('MercuryConfig').LinkedAgents.indexOf(t.toString())>-1){q.push(t)}else p.push(t);break;case c('MercuryTypeaheadConstants').INTERNAL_BOT_PAGE_TYPE:r.push(t);break;default:break;}}.bind(this),this);var s=q.concat(l,o,m,p,n,r);return i.buildData.call(this,s)};j.prototype.query=function(k,l,m,n){'use strict';return i.query.call(this,k,l,m,n)};j.prototype.respond=function(k,l,m){'use strict';return i.respond.call(this,k,l,m)};j.prototype.setShowThreads=function(k){'use strict';this.$ChatTabTypeaheadDataSource1=k};f.exports=j}),null);
__d('FantaTabMainPlaceholder.react',['cx','React','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(){return c('React').createElement('div',{className:"_59v1"},c('React').createElement('div',{className:"_5qi9"+(' '+"_5qib")},c('React').createElement('div',{className:"_3_9e"+(' '+"_s0f")+(' '+"_50mz")+(' '+"_50m_")+(' '+"fbNub")+(' '+"_50-v")+(' '+"opened")+(' '+"_27_3")},c('React').createElement('div',{className:'fbNubFlyout fbDockChatTabFlyout uiContextualLayerParent'},c('React').createElement('div',{className:'fbNubFlyoutOuter'},c('React').createElement('div',{className:'fbNubFlyoutInner'},c('React').createElement('div',{className:"_5-kq"},c('React').createElement(c('XUISpinner.react'),null))))))))};f.exports=i}),null);
__d('FBRTCMessageHandler',['invariant','Bootloader','FBRTCMessageListener','FBRTCSupport'],(function a(b,c,d,e,f,g,h){var i=null,j=false,k=null,l={init:function o(){if(!j&&c('FBRTCSupport').isReceiveWebrtcSupported()){j=true;c('FBRTCMessageListener').init(false);c('FBRTCMessageListener').once('messageReceived',function(p){m()});c('FBRTCMessageListener').once('multiwayMessageReceived',function(p){n(p)})}},resetListener:function o(){i||h(0);c('FBRTCMessageListener').removeMessageHandler();c('FBRTCMessageListener').setMessageHandler(i.onMessageReceived,i)}};function m(){if(!i)c('Bootloader').loadModules(["FBRTCIncomingCallController","FBRTCIncomingCallDialog","FBRTCMissedVideoCallHandler","FBRTCUnsupportedBrowserMessage"],function(o,p,q,r){i=new o(p,r,new q());c('FBRTCMessageListener').setMessageHandler(i.onMessageReceived,i)},'FBRTCMessageHandler');}function n(o){if(!k)c('Bootloader').loadModules(["FBRTCGroupCallIncomingController","FBRTCGroupCallIncomingDialog"],function(p,q){k=new p(q);c('FBRTCMessageListener').setMultiwayMessageHandler(k.onMessageReceived,k);k.onMessageReceived(o)},'FBRTCMessageHandler');}f.exports=l}),null);
__d('WorkFocusMode',['invariant','WorkModeConfig','WorkUserAvailabilityStatusType','emptyFunction','ifRequired'],(function a(b,c,d,e,f,g,h){'use strict';var i={},j={status:'AVAILABLE',end_date:0};if(c('WorkModeConfig').availability){j.status=c('WorkModeConfig').availability.status;j.end_date=c('WorkModeConfig').availability.end_date}f.exports={updateAvailability:function k(l,m){var n=Object.keys(c('WorkUserAvailabilityStatusType')).find(function(o){return c('WorkUserAvailabilityStatusType')[o]===l});typeof n==='string'||h(0);j.status=n;j.end_date=m},currentViewerInFocusMode:function k(l){if(!c('WorkModeConfig').focus_messaging_enabled)return false;if(l){if(i[l])return false;var m=null;c('ifRequired')('MercuryThreads',function(o){m=o.get().getThreadMetaNow(l)},c('emptyFunction'));if(m&&m.bypass_focus_mode_until&&m.bypass_focus_mode_until>Date.now()/1000)return false;}var n=c('WorkUserAvailabilityStatusType')[j.status];if(n===c('WorkUserAvailabilityStatusType').FOCUS&&j.end_date*1000>Date.now())return true;return false},addBypassFocusModeForThread:function k(l){i[l]=true},removeBypassFocusModeForThread:function k(l){i[l]=false}}}),null);
__d('MercuryFolders',['MercuryFoldersConfig','MessagingTag'],(function a(b,c,d,e,f,g){var h=[c('MessagingTag').INBOX,c('MessagingTag').PENDING,c('MessagingTag').OTHER,c('MessagingTag').ACTION_ARCHIVED],i={getSupportedFolders:function j(){return h.filter(function(k){if(k===c('MessagingTag').PENDING){return !c('MercuryFoldersConfig').hide_message_filtered}else if(k===c('MessagingTag').OTHER)return !c('MercuryFoldersConfig').hide_message_requests;return true}).concat()},getFromMeta:function j(k){var l=k.folder;if(k.is_archived)l=c('MessagingTag').ACTION_ARCHIVED;return l}};f.exports=i}),null);
__d('MercuryUnreadState',['invariant','MercuryFolders','LogHistory','KeyedCallbackManager','MercuryActionType','MercuryDispatcher','MercuryGlobalActionType','MercurySingletonProvider','MercuryThreadlistConstants','MercuryThreadIDMap','MessagingTag','MercuryServerRequests','MercuryThreadInformer','MercuryThreads','createObjectFrom'],(function a(b,c,d,e,f,g,h){'use strict';var i=(c('MercuryFolders').getSupportedFolders()||[]).filter(function(p){return p!==c('MessagingTag').ACTION_ARCHIVED}),j='unread_thread_hash',k='unseen_thread_list',l=c('MercuryThreadlistConstants').MAX_UNREAD_COUNT,m=c('LogHistory').getInstance('mercury_unread_state');n.getForFBID=function(p){return o.getForFBID(p)};n.get=function(){return o.get()};function n(p){this.$MercuryUnreadState1=p;this.$MercuryUnreadState2=c('MercuryServerRequests').getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState3=c('MercuryThreadIDMap').getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState4=c('MercuryThreadInformer').getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState5=c('MercuryThreads').getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState6=c('MercuryDispatcher').getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState7={};this.$MercuryUnreadState8={};this.$MercuryUnreadState9={};this.$MercuryUnreadState10={};this.$MercuryUnreadState11={};i.forEach(function(q){this.$MercuryUnreadState9[q]=0;this.$MercuryUnreadState10[q]=false;this.$MercuryUnreadState11[q]=new (c('KeyedCallbackManager'))()}.bind(this));this.$MercuryUnreadState6.subscribe('update-unread',this.$MercuryUnreadState12.bind(this));this.$MercuryUnreadState6.subscribe('update-thread-ids',function(q,r){this.$MercuryUnreadState13(r)}.bind(this))}n.prototype.getUnreadCount=function(p){if(this.exceedsMaxCount(p)){m.error('unguarded_unread_count_fetch','{}');return 0}return this.$MercuryUnreadState14(p)};n.prototype.exceedsMaxCount=function(p){return this.$MercuryUnreadState10[p]||this.$MercuryUnreadState14(p)>l};n.prototype.markFolderAsRead=function(p){if(this.$MercuryUnreadState10[p]||this.$MercuryUnreadState14(p)>0)this.$MercuryUnreadState2.markFolderAsRead(p);};n.prototype.getIsThreadUnread=function(p,q){var r=q||c('MessagingTag').INBOX,s=this.$MercuryUnreadState15(r);return !!(s&&s[p])};n.prototype.$MercuryUnreadState16=function(p,q){this.$MercuryUnreadState11[p].setResource(j,q);this.$MercuryUnreadState11[p].setResource(k,Object.keys(q))};n.prototype.$MercuryUnreadState17=function(p,q){var r=this.$MercuryUnreadState11[p].executeOrEnqueue(j,q),s=this.$MercuryUnreadState11[p].getUnavailableResources(r);if(s.length)this.$MercuryUnreadState2.fetchUnreadThreadIDs(p);};n.prototype.$MercuryUnreadState15=function(p){return this.$MercuryUnreadState11[p].getResource(j)};n.prototype.$MercuryUnreadState14=function(p){var q=this.$MercuryUnreadState11[p].getResource(k);if(q){return q.length}else return this.$MercuryUnreadState9[p];};n.prototype.$MercuryUnreadState12=function(p,q){var r=void 0;(q.unread_thread_fbids||[]).forEach(function(s){r=s.folder;if(!this.$MercuryUnreadState18(r))return;var t=s.thread_fbids||[];t=t.concat(s.other_user_fbids||[]);var u=this.$MercuryUnreadState19(t);this.$MercuryUnreadState16(r,c('createObjectFrom')(u,true));if(u.length>l)this.$MercuryUnreadState10[r]=true;this.$MercuryUnreadState4.updatedUnreadState()}.bind(this));(q.message_counts||[]).forEach(function(s){if(s.unread_count===undefined)return;r=s.folder;if(s.unread_count>l){this.$MercuryUnreadState10[r]=true;this.$MercuryUnreadState16(r,{});this.$MercuryUnreadState4.updatedUnreadState()}else{this.$MercuryUnreadState9[r]=s.unread_count;if(this.$MercuryUnreadState9[r]===0)this.$MercuryUnreadState16(r,{});this.$MercuryUnreadState4.updatedUnreadState()}}.bind(this));(q.global_actions||[]).forEach(function(s){if(s.action_type===c('MercuryGlobalActionType').MARK_ALL_READ)this.$MercuryUnreadState20(s.folder,s.timestamp);}.bind(this));(q.actions||[]).forEach(function(s){var t=c('MercuryActionType'),u=s.other_user_fbid?s.other_user_fbid:s.thread_fbid,v=s.thread_id?s.thread_id:u;if(s.action_type==t.DELETE_THREAD){i.forEach(function(x){this.$MercuryUnreadState21(x,v)}.bind(this))}else if(s.action_type==t.CHANGE_ARCHIVED_STATUS||s.action_type==t.CHANGE_FOLDER){var w=this.$MercuryUnreadState5.getThreadMetaNow(s.thread_id);!!w||h(0);r=c('MercuryFolders').getFromMeta(w);if(this.$MercuryUnreadState18(r)&&w.unread_count>0)this.$MercuryUnreadState22(r,v);i.forEach(function(x){if(x!=r)this.$MercuryUnreadState21(x,v);}.bind(this))}else{r=this.$MercuryUnreadState23(s);if(!this.$MercuryUnreadState18(r))return;if(s.action_type==t.CHANGE_READ_STATUS){if(s.mark_as_read){this.$MercuryUnreadState21(r,v,s.timestamp)}else this.$MercuryUnreadState22(r,v,s.timestamp);}else if(s.action_type==t.USER_GENERATED_MESSAGE||s.action_type==t.LOG_MESSAGE)if(s.is_unread)this.$MercuryUnreadState22(r,v,s.timestamp);}}.bind(this))};n.prototype.$MercuryUnreadState22=function(p,q,r){if(this.$MercuryUnreadState10[p])return;this.$MercuryUnreadState17(p,function(s){var t=this.$MercuryUnreadState7[p]||0,u=this.$MercuryUnreadState8[q]||0,v=r||Number.POSITIVE_INFINITY;if(v>=t&&v>=u&&!s[q]){s[q]=r||0;this.$MercuryUnreadState16(p,s);this.$MercuryUnreadState4.updatedUnreadState()}}.bind(this))};n.prototype.$MercuryUnreadState21=function(p,q,r){if(this.$MercuryUnreadState10[p])return;this.$MercuryUnreadState17(p,function(s){if(r){var t=this.$MercuryUnreadState8[q];if(!t||t<r)this.$MercuryUnreadState8[q]=r;}var u=s[q];if(r&&typeof u=='number'&&r<u)return;if(q in s){delete s[q];this.$MercuryUnreadState16(p,s);this.$MercuryUnreadState4.updatedUnreadState()}}.bind(this))};n.prototype.$MercuryUnreadState20=function(p,q){this.$MercuryUnreadState10[p]=false;this.$MercuryUnreadState16(p,{});this.$MercuryUnreadState7[p]=Math.max(this.$MercuryUnreadState7[p]||0,q||0);this.$MercuryUnreadState4.updatedUnreadState()};n.prototype.$MercuryUnreadState19=function(p){return p.map(this.$MercuryUnreadState3.convertThreadIDIfAvailable,this.$MercuryUnreadState3)};n.prototype.$MercuryUnreadState13=function(p){i.forEach(function(q){var r=this.$MercuryUnreadState15(q);if(!r)return;for(var s in p){var t=p[s];if(r[s]){r[t]=r[s];delete r[s]}}this.$MercuryUnreadState16(q,r)}.bind(this))};n.prototype.$MercuryUnreadState23=function(p){var q=p.thread_id?this.$MercuryUnreadState5.getThreadMetaNow(p.thread_id):null;return q?c('MercuryFolders').getFromMeta(q):p.folder?p.folder:''};n.prototype.$MercuryUnreadState18=function(p){return !!p&&i.includes(p)};var o=new (c('MercurySingletonProvider'))(n);f.exports=n}),null);
__d('FantaTabsSlimApp',['BootloadOnRender.react','ChatPerfInstrumentation','FantaTabMainPlaceholder.react','FantaTabsAppBase','JSResource','LazyComponent.react','Map','React','ReactDOM','ifRequired','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=void 0;h=babelHelpers.inherits(k,c('FantaTabsAppBase'));i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$FantaTabsSlimApp1=false,this.$FantaTabsSlimApp3=function(q,r){if(this.$FantaTabsSlimApp1){c('ifRequired')('FantaMessageActions',function(s){c('setImmediate')(function(){s.receivedNewMessage(q,r)})})}else this.$FantaTabsSlimApp2(function(){c('ifRequired')('FantaMessageActions',function(s){c('setImmediate')(function(){s.receivedNewMessage(q,r)})})});}.bind(this),m}k.prototype.getPumpedUp=function(l){if(this.$FantaTabsSlimApp1){l()}else this.$FantaTabsSlimApp2(l);};k.prototype.getViewComponent=function(){return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{loadDataOnMount:false}),loader:c('JSResource')('FantaMercuryTabsWithMain.react').__setRef('FantaTabsSlimApp'),placeholder:c('React').createElement(c('FantaTabMainPlaceholder.react'),null)})};k.prototype.initializeFantaData=function(l){e(['FantaCookieUtil','MercuryThreadInformer','PresenceState'],function(m,n,o){o.registerStateLoader(function(p){var q,r=this;if(this.$FantaTabsSlimApp1){c('ifRequired')('FantaTabActions',function(s){c('ifRequired')('FantaAppStore',function(t){s.loadFromData(m.convertCookieData(p,t.getState().tabGroup,l))})})}else (function(){var s=m.convertCookieData(p,null,l);if(s.tabs.length>0)r.$FantaTabsSlimApp2(function(){c('ifRequired')('FantaTabActions',function(t){t.loadFromData(s)})});})();}.bind(this));o.doSync();n.get().subscribe('threads-updated',function(p,q){c('ifRequired')('FantaGetMessageActions',function(r){Object.keys(q).forEach(function(s){c('setImmediate')(function(){r.refreshThread(s)})})})});c('ChatPerfInstrumentation').logInitData()}.bind(this))};k.prototype.$FantaTabsSlimApp2=function(l){c('ifRequired')('FantaAppStore',function(m){l()},function(){e(['FantaAppStore','FantaCookieUtil','FantaMessageActions','FantaTabActions','FantaTabViewportManager','PresenceState'],function(m,n,o,p,q,r){r.registerStateStorer(function(s){var t=m.getState().tabGroup;if(!j||j&&!j.equals(t)){j=t;return n.createCookieData(t,s)}else return s;});c('ReactDOM').render(this.getViewComponent(),this.tabsElem);q.init(this.tabsElem);this.$FantaTabsSlimApp1=true;l()}.bind(this))}.bind(this))};k.prototype.initializeFantaUI=function(){e(['FantaMercuryThreadEventsBootloaded','FantaMessageActions','FantaTabActions','FantaTabViewportManager','FBRTCMessageHandler','MercuryBrowserAlerts'],function(l,m,n,o,p,q){p.init();q.init();l.onMessagesReceived(this.$FantaTabsSlimApp3);c('ChatPerfInstrumentation').logInitUI();c('ChatPerfInstrumentation').logDisplayDone()}.bind(this))};f.exports=new k()}),null);
__d('PureStoreBasedStateMixin',['invariant','StoreBasedStateMixinHelper','setImmediate'],(function a(b,c,d,e,f,g,h){'use strict';var i=function(){for(var j=arguments.length,k=Array(j),l=0;l<j;l++)k[l]=arguments[l];return {getInitialState:function m(){return this.constructor.calculateState()},componentWillMount:function m(){this.constructor.calculateState||h(0);this._recalculateStateID=null;var n=function(){if(this.isMounted())this.setState(this.constructor.calculateState());this._recalculateStateID=null}.bind(this);this._mixin=new (c('StoreBasedStateMixinHelper'))(k);this._mixin.subscribeCallback(function(){if(this._recalculateStateID===null)this._recalculateStateID=c('setImmediate')(n);}.bind(this))},componentWillUnmount:function m(){this._mixin.release();this._mixin=null}}}.bind(this);f.exports=i}),null);
__d('MNCommerceDialogContainerMount',['MNCommerceDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('MNCommerceDialogContainer.react'),null),j)}};f.exports=h}),null);
__d('MercuryAudienceRestrictedTypeaheadDataSource',['CurrentUser','DataSource','MercuryParticipantTypes','MercuryTypeaheadConstants','OrderedFriendsList','ShortProfiles'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('DataSource'));i=h&&h.prototype;function j(k){'use strict';k=k||{};k.kanaNormalization=true;k.maxResults=c('MercuryTypeaheadConstants').COMPOSER_CHATTAB_MAX;k.minQueryLength=2;i.constructor.call(this,k);this.$MercuryAudienceRestrictedTypeaheadDataSource1=false;this.$MercuryAudienceRestrictedTypeaheadDataSource2=false;this.$MercuryAudienceRestrictedTypeaheadDataSource3={};this.$MercuryAudienceRestrictedTypeaheadDataSource4=true;this.queryCache={};this.localCache={};this.queryIDs={}}j.prototype.dirty=function(){'use strict';return this};j.prototype.buildData=function(k){'use strict';return i.buildData.call(this,k)};j.prototype.query=function(k,l,m,n){'use strict';var o=l||k.length===1;return i.query.call(this,k,o,m,n)};j.prototype.getQueryData=function(k,l){'use strict';return babelHelpers['extends']({},i.getQueryData.call(this,k,l))};j.prototype.setEntry=function(k,l){'use strict';this.$MercuryAudienceRestrictedTypeaheadDataSource3[k]=l};j.prototype.getEntry=function(k){'use strict';return this.$MercuryAudienceRestrictedTypeaheadDataSource3[k]||null};j.prototype.getCachedShortProfileIDs=function(){'use strict';var k=c('ShortProfiles').getCachedProfileIDs(),l=k.filter(function(m){var n=c('ShortProfiles').getNow(m);return m==c('CurrentUser').getID()||n&&(n.type===c('MercuryParticipantTypes').FRIEND||n.type===c('MercuryParticipantTypes').FB4C)});return l};j.prototype.isBootstrapped=function(){'use strict';return this.$MercuryAudienceRestrictedTypeaheadDataSource1};j.prototype.isBootstrapping=function(){'use strict';return this.$MercuryAudienceRestrictedTypeaheadDataSource2};j.prototype.processEntries=function(k,l){'use strict';k=k&&k.map(function(m){if(m.index==null&&(m.render_type===c('MercuryParticipantTypes').FRIEND||m.render_type===c('MercuryParticipantTypes').FB4C))m.index=c('OrderedFriendsList').getActiveRank(m.uid);return m});return i.processEntries.call(this,k)};j.prototype.mergeUids=function(k,l,m,n){'use strict';var o=l.sort(function(p,q){var r=this.getEntry(p),s=this.getEntry(q);return r&&r.index&&s&&s.index?r.index-s.index:0}.bind(this));return i.mergeUids.call(this,k,o,m,n)};j.prototype.setQueryData=function(k,l){'use strict';return i.setQueryData.call(this,k)};j.prototype.respond=function(k,l,m){'use strict';return i.respond.call(this,k,l,m)};j.prototype.setShowThreads=function(k){'use strict';this.$MercuryAudienceRestrictedTypeaheadDataSource4=k};f.exports=j}),null);
__d('P2PDialogContainerMount',['P2PDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('P2PDialogContainer.react'),null),j)}};f.exports=h}),null);
__d('PagesPlatformDialogContainerMount',['PagesPlatformDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('PagesPlatformDialogContainer.react'),null),j)}};f.exports=h}),null);
__d('LiveMessageReceiver',['Arbiter','ChannelConstants','emptyFunction','shield'],(function a(b,c,d,e,f,g){function h(i){this.eventName=i;this.subs=null;this.handler=c('emptyFunction');this.shutdownHandler=null;this.registered=false;this.appId=1}Object.assign(h,{getAppMessageType:function i(j,k){return 'live_message/'+j+':'+k},route:function i(j){var k=function l(m){var n=h.getAppMessageType(j.app_id,j.event_name);c('Arbiter').inform(n,m,c('Arbiter').BEHAVIOR_PERSISTENT)};k(j.response)}});Object.assign(h.prototype,{setAppId:function i(j){this.appId=j;return this},setHandler:function i(j){this.handler=j;this._dirty();return this},setRestartHandler:c('emptyFunction'),setShutdownHandler:function i(j){this.shutdownHandler=c('shield')(j);this._dirty();return this},_dirty:function i(){if(this.registered){this.unregister();this.register()}},register:function i(){var j=function(l,m){return this.handler(m)}.bind(this),k=h.getAppMessageType(this.appId,this.eventName);this.subs={};this.subs.main=c('Arbiter').subscribe(k,j);if(this.shutdownHandler)this.subs.shut=c('Arbiter').subscribe(c('ChannelConstants').ON_SHUTDOWN,this.shutdownHandler);this.registered=true;return this},unregister:function i(){if(!this.subs)return this;for(var j in this.subs)if(this.subs[j])this.subs[j].unsubscribe();this.subs=null;this.registered=false;return this}});f.exports=h}),null);
__d('initLiveMessageReceiver',['Arbiter','ChannelConstants','LiveMessageReceiver'],(function a(b,c,d,e,f,g){c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('app_msg'),function(h,i){c('LiveMessageReceiver').route(i.obj)})}),null);