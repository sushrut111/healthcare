if (self.CavalryLogger) { CavalryLogger.start_js(["IiiBz"]); }

__d("XRefererFrameController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/common\/referer_frame.php",{v:{type:"Int"}})}),null);
__d('isOculusDotComURI',['URI'],(function a(b,c,d,e,f,g){var h=new RegExp('(^|\\.)oculus\\.com$','i'),i=['https'];function j(k){if(k.isEmpty()&&k.toString()!=='#')return false;if(!k.getDomain()&&!k.getProtocol())return false;return i.indexOf(k.getProtocol())!==-1&&h.test(k.getDomain())}f.exports=j}),null);
__d('ControlledReferer',['Bootloader','DeferredCookie','URI','UserAgent','XRefererFrameController','isBonfireURI','isMessengerDotComURI','isOculusDotComURI','lowerFacebookDomain'],(function a(b,c,d,e,f,g){var h={useFacebookReferer:function i(j,k,l){if(!c('DeferredCookie').canEmbedThirdPartyPixel()){c('Bootloader').loadModules(["BanzaiODS"],function(p){p.bumpEntityKey('defer_cookies','block_controlled_referer_iframe')},'ControlledReferer');return}var m=false;function n(){if(m)return;var p=j.contentWindow.location.pathname;if(p!=='/intern/common/referer_frame.php'&&p!=='/common/referer_frame.php')return;m=true;j.contentWindow.document.body.style.margin=0;k()}var o=void 0;if(c('isMessengerDotComURI')(c('URI').getRequestURI())||c('isBonfireURI')(c('URI').getRequestURI())){o=c('XRefererFrameController').getURIBuilder().getURI().toString()}else if(c('isOculusDotComURI')(c('URI').getRequestURI())){o='/common/referer_frame.php'}else if(!c('lowerFacebookDomain').isValidDocumentDomain()){o='/intern/common/referer_frame.php'}else if(c('UserAgent').isBrowser('Opera')){o=c('XRefererFrameController').getURIBuilder().getURI().toString()}else o=c('XRefererFrameController').getURIBuilder().getURI().qualify().setProtocol('https').setSubdomain('staticxx').toString();if(l)o+='?fb_source='+l;j.onload=n;j.src=o},useFacebookRefererHtml:function i(j,k,l){h.useFacebookReferer(j,function(){j.contentWindow.document.body.innerHTML=k},l)}};f.exports=h}),null);
__d('TrackingPixel',['Arbiter','ControlledReferer','DeferredCookie','JSLog','NonBlockingIFrame','WebSpeedJSExperiments'],(function a(b,c,d,e,f,g){var h={_iframe:undefined,loadWithNoReferrer:function i(j){if(!c('DeferredCookie').canEmbedThirdPartyPixel()){c('JSLog').error('Attempting to load a TrackingPixel (%s) while cookies are deferred. '+'This is not allowed because tracking pixels sometimes set cookies.',j);return}if(!h._iframe)if(c('WebSpeedJSExperiments').non_blocking_logger){h._iframe=true;c('NonBlockingIFrame').loadIFrame().then(function(l){h._iframe=l;c('ControlledReferer').useFacebookReferer(l,function(){c('Arbiter').inform('TrackingPixel/iframeIsLoaded',null,c('Arbiter').BEHAVIOR_PERSISTENT)},null)}).done()}else{var k=document.createElement('iframe');k.frameborder=0;k.width=k.height=1;k.style.position='absolute';k.style.top='-10px';c('ControlledReferer').useFacebookReferer(k,function(){c('Arbiter').inform('TrackingPixel/iframeIsLoaded',null,c('Arbiter').BEHAVIOR_PERSISTENT)},null);document.body.appendChild(k);h._iframe=k}c('Arbiter').subscribe('TrackingPixel/iframeIsLoaded',function(){var l=h._iframe.contentWindow,m=new l.Image();m.src=j})}};f.exports=h}),null);
__d('ExternalTrackingTag',['AsyncSignal','Event','TrackingPixel'],(function a(b,c,d,e,f,g){var h={listenForElementClick:function i(j,k,l,m,n){c('Event').listen(j,'click',function(){h.sendRequest(k,l,m,n)})},sendRequest:function i(j,k,l,m){if(!j)return;new (c('AsyncSignal'))('/ads/external_tracking_tag/',{href:j,tracking_tag_id:k,adgroup_id:l,ad_id:m}).send();c('TrackingPixel').loadWithNoReferrer(j)}};f.exports=h}),null);
__d('FBLynxWrapper',['URI','isFacebookURI','isLinkshimURI'],(function a(b,c,d,e,f,g){'use strict';var h={SUBDOMAIN:'l',SUBDOMAIN_M:'lm',PATH:'/',URL_PARAM:'u',ENC_PARAM:'e',isLynxLink:function i(j){if(j.getAttribute('data-lynx-async-dest'))return true;if(j.getAttribute('data-lynx-uri'))return true;if(c('isLinkshimURI')(new (c('URI'))(j.href)))return true;return false}};f.exports=h}),null);
__d('LitestandColumnManager',['Arbiter','BlueBar','Event','NavigationMessage','Run','SubscriptionsHandler','clamp','getScrollPosition'],(function a(b,c,d,e,f,g){'use strict';var h=0,i=null;function j(){if(i)return;i=new (c('SubscriptionsHandler'))();i.addSubscriptions(c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,function(){m(0);k()}),c('Event').listen(window,'resize',function(){if(!c('BlueBar').hasFixedBlueBar()){m(0);k()}}),c('Event').listen(window,'scroll',function(){if(!l())k();}));c('Run').onLeave(function(){return i&&i.release()})}function k(){i&&i.release();i=null}function l(){if(h<=0)return false;m(c('clamp')(c('getScrollPosition')(window).y,0,h));return h>0}function m(o){h=o}var n={adjustVerticalWindowPosition:function o(p,q){j();m(q);window.scrollTo(p.x,p.y+h)}};f.exports=n}),null);
__d('LitestandStream',['csx','invariant','Arbiter','CSS','EventEmitter','LitestandColumnManager','Run','getScrollPosition','nullthrows'],(function a(b,c,d,e,f,g,h,i){var j=void 0,k=void 0,l=void 0,m=void 0,n=new (c('EventEmitter'))(),o={init:function p(q,r,s,t){j=s;l=q;k=t;if(!m)m=c('Arbiter').subscribe('ufi/didUpdate',function(u,v){if(v.offsetY)c('LitestandColumnManager').adjustVerticalWindowPosition(c('getScrollPosition')(window),v.offsetY);});c('Run').onLeave(function(){m&&m.unsubscribe();m=null;n.removeAllListeners('ready');l=null});n.emit('ready')},getStoriesSelector:function p(){return "._5jmm"},getStreamRoot:function p(){return l},getSectionID:function p(){return j},getStoryID:function p(){return k},isStory:function p(q){return c('CSS').matchesSelector(q,"._5jmm")},getFeedStreamID:function p(){return parseInt(c('nullthrows')(l).id.split('feed_stream_')[1],16)%1e+08},isReady:function p(){return !!l},addReadyListener:function p(q){o.isReady()||i(0);return n.once('ready',q)}};f.exports=o}),null);
__d('FeedAdsClickLogger',['Arbiter','AsyncRequest','BanzaiODS','DataAttributeUtils','DOM','ExternalTrackingTag','FBLynxWrapper','LitestandMessages','LitestandStream','Parent','SLConfig','TrackingNodes','URI','collectDataAttributes','ge','isFacebookURI','isLinkshimURI'],(function a(b,c,d,e,f,g){'use strict';var h={},i=false,j=[],k,l=false;function m(){}m.prototype.init=function(o){k=c('SLConfig').gk.sl_replace_s;c('Arbiter').subscribe('ClickRefAction/new',this.onNewUserAction.bind(this));l=o.see_more_logging_enabled;if(o.append_tracking_data_to_links){this.appendTrackingDataToLinks();c('Arbiter').subscribe(c('LitestandMessages').STORIES_INSERTED,this.appendTrackingDataToLinks.bind(this));c('Arbiter').subscribe('FeedAdsClickLogger/refreshTrackingData',this.appendTrackingDataToLinks.bind(this),c('Arbiter').SUBSCRIBE_NEW)}};m.prototype.getStories=function(){var o=c('LitestandStream').getStreamRoot();if(o){return c('DOM').scry(o,c('LitestandStream').getStoriesSelector())}else{var p=c('ge')('home_stream');if(p)return c('DOM').scry(p,'.uiStreamStory');}return []};m.prototype.appendTrackingDataToLinks=function(){var o=this.getStories();for(var p=0;p<o.length;p++){var q=o[p];if(q in j)continue;var r=c('DataAttributeUtils').getDataFt(q);if(!r||r.indexOf('ei')===-1&&r.indexOf('mei')===-1)continue;var s=c('DOM').scry(q,'a');for(var t=0;t<s.length;t++){var u=s[t];if(u.getAttribute('ajaxify')!=null)continue;if(u.getAttribute('rel')!=null)continue;var v=u.getAttribute('href');if(!v||v.charAt(0)==='#')continue;var w=new (c('URI'))(u);if(c('isFacebookURI')(w)===false)continue;if(c('isLinkshimURI')(w)||c('FBLynxWrapper').isLynxLink(u))continue;if(w.isPossiblySignedURI()===true)continue;if(k&&(w.getPath()==='/ads/about'||w.getPath()==='/about/ads'))continue;u.setAttribute('href',n(u).toString());u.setAttribute('onmousedown',"this.href = this.href.replace('__md__=0', '__md__=1');")}j.push(q)}};m.prototype.getHref=function(o){return o.getAttribute&&(o.getAttribute('ajaxify')||o.getAttribute('data-endpoint'))||o.action||o.href};m.prototype.sendLogRequest=function(o,p){var q=o.ei||o.ai;if(!q&&o.mei)q=o.mf_story_key;if(o!==null&&typeof q==='string'){var r=false;if(o.tn){var s=c('TrackingNodes').parseTrackingNodeString(o.tn);for(var t=0;t<s.length;t++){var u=s[t][0];switch(u){case c('TrackingNodes').types.LIKE_LINK:case c('TrackingNodes').types.UNLIKE_LINK:case c('TrackingNodes').types.COMMENT:case c('TrackingNodes').types.COMMENT_LINK:case c('TrackingNodes').types.ADD_COMMENT_BOX:case c('TrackingNodes').types.MULTI_ATTACHMENT_VIDEO:return;case c('TrackingNodes').types.XBUTTON:case c('TrackingNodes').types.HIDE_LINK:case c('TrackingNodes').types.REPORT_SPAM_LINK:case c('TrackingNodes').types.HIDE_ALL_LINK:case c('TrackingNodes').types.DROPDOWN_BUTTON:case c('TrackingNodes').types.UNHIDE_LINK:return;case c('TrackingNodes').types.RELATED_SHARE_ARTICLE:case c('TrackingNodes').types.RELATED_SHARE_VIDEO:return;case c('TrackingNodes').types.TRANSLATION:return;case c('TrackingNodes').types.ATTACHMENT:case c('TrackingNodes').types.USER_MESSAGE:r=true;break;}}}var v=Date.now(),w=500;o.duplicate_click=!!h[q]&&v-h[q]<w;h[q]=v;var x=new (c('AsyncRequest'))('/ajax/ssinfeed/end/').setData(o).setAllowCrossPageTransition(true).setMethod('POST');x.send();var y=o.href;if(c('isLinkshimURI')(new (c('URI'))(y))&&new (c('URI'))(y).getQueryData())y=new (c('URI'))(y).getQueryData().u;if(r&&!o.duplicate_click&&p!==null&&p.url&&y&&c('isFacebookURI')(new (c('URI'))(y))===false){c('ExternalTrackingTag').sendRequest(p.url,p.tag_id,p.adgroup_id);c('BanzaiODS').bumpEntityKey('external_tracking_tags','request_sent')}}};m.prototype.onNewUserAction=function(o,p){if(!p.node)return;var q=this.getHref(p.node),r=c('Parent').byTag(p.node,'input')||c('Parent').byTag(p.node,'button');if(!q&&r&&r.type=='submit'&&r.getAttribute&&c('DataAttributeUtils').getDataFt(r))q='#';if(p.event&&p.node.tagName==='A'&&p.event.defaultPrevented&&l)q='#';var s,t;if(q&&p.event&&p.event.type==='click'&&!p.event.isRightClick()){s=c('collectDataAttributes')(p.node,['ft']);s.ft.href=q;s.ft.mouse_type=p.event.type;t=c('collectDataAttributes')(p.node,['external-tracking-tags']);this.sendLogRequest(s.ft,t['external-tracking-tags'])}};function n(o){var p=new (c('URI'))(o.href),q=c('collectDataAttributes')(o,['ft']).ft,r=p.getQueryData();r.ft=q;r.__md__=0;p.setQueryData(r);return p}f.exports={init:function o(p){if(i===false){new m().init(p);i=true}},buildURL:n}}),null);
__d('SLPerfTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:SLPerfLoggerConfig',this.$SLPerfTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:SLPerfLoggerConfig',this.$SLPerfTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$SLPerfTypedLogger1={};return this};h.prototype.updateData=function(j){this.$SLPerfTypedLogger1=babelHelpers['extends']({},this.$SLPerfTypedLogger1,j);return this};h.prototype.setCount=function(j){this.$SLPerfTypedLogger1.count=j;return this};h.prototype.setDurationMs=function(j){this.$SLPerfTypedLogger1.duration_ms=j;return this};h.prototype.setEvent=function(j){this.$SLPerfTypedLogger1.event=j;return this};var i={count:true,duration_ms:true,event:true};f.exports=h}),null);
__d('SLUtils',['csx','cx','Arbiter','DOM','Event','FeedAdsClickLogger','LitestandMessages','LitestandStream','Map','MutationObserver','SLConfig','SLPerfTypedLogger','URI','clearTimeout','curry','cxodecode','goURI','joinClasses','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=false,k=!!(b.MutationObserver||b.WebKitMutationObserver);function l(sa,ta){var ua;if(j)return;j=true;if(!c('SLConfig').gk.s_link_utils)return;if(la()){na().setEvent('init').log();pa('init_timer')}m();if(c('SLConfig').gk.sl_replace_about_link)r(function(xa,ya){return s(xa,ya)});if(c('SLConfig').gk.sl_replace_s)(function(){ea(sa);var xa=ta.map(function(ya){return {nonce:c('cxodecode')(ya.nonce),className:c('cxodecode')(ya.className)}});r(function(ya,za){xa.forEach(function(ab){var bb=c('DOM').scry(ya,ab.nonce);bb.forEach(function(cb){while(cb.firstChild)cb.removeChild(cb.firstChild);cb.className=c('joinClasses')(cb.className,ab.className)})})})})();if(c('SLConfig').gk.sl_replace_subtitle&&k){var va=ja(),wa=new (c('MutationObserver'))(function(){return ba()});wa.observe(va,{childList:true,subtree:true});ha();r(function(xa,ya){z(xa,ya);aa(ya)})}o();if(la())na().setEvent('init_duration').setDurationMs(qa('init_timer')).log();}function m(){c('Arbiter').subscribe(c('LitestandMessages').STORIES_INSERTED,o);c('Arbiter').subscribe('FeedAdsClickLogger/refreshTrackingData',o,c('Arbiter').SUBSCRIBE_NEW)}var n=null;function o(){if(la())pa('hsa_timer');c('clearTimeout')(n);n=null;var sa=[],ta=v(),ua=ka(),va=false;ua.forEach(function(wa){if(!wa.id)return;if(ta.has(wa.id))return;if(!y(wa,wa.id)){va=true;return}ta.set(wa.id,wa);sa.push([wa,wa.id])});if(va){n=c('setTimeoutAcrossTransitions')(o,c('SLConfig').sv.sl_content_waiting_delay);if(la())na().setEvent('hsa_waiting_for_content').log();}if(la())na().setEvent('hsa_stories_added').setCount(sa.length).log();if(sa.length===0)return;sa.forEach(function(wa){var xa=wa[0],ya=wa[1];return q().forEach(function(za){return za(xa,ya)})});if(la())na().setEvent('hsa_duration').setDurationMs(qa('hsa_timer')).log();}var p=[];function q(){return p}function r(sa){p.push(sa)}function s(sa,ta){var ua=y(sa,ta);if(!ua){if(la())na().setEvent('usl_real_subtitle_missing').log();return}var va=c('DOM').scry(ua,'a'),wa=va.filter(function(xa){var ya=new (c('URI'))(xa.href).getPath();return ya==='/ads/about'||ya==='/about/ads'});if(la())na().setEvent('usl_links_updated').setCount(wa.length).log();wa.forEach(function(xa){var ya=c('FeedAdsClickLogger').buildURL(xa);c('Event').listen(xa,'click',c('curry')(t,ya));xa.href='#'})}function t(sa,ta){c('goURI')(sa.toString().replace('__md__=0','__md__=1'));c('Event').stop(ta)}var u=new (c('Map'))();function v(){return u}var w=new (c('Map'))(),x=new (c('Map'))();function y(sa,ta){var ua=null;if(w.has(ta)){ua=w.get(ta)}else ua=sa;var va=c('DOM').scry(ua,"._5pcp");if(va.length===0){return null}else return va[0];}function z(sa,ta){if(w.has(ta)||x.has(ta))return;var ua=ga();if(!ua){if(la())na().setEvent('es_subtitle_container_missing').log();return}var va=c('DOM').scry(sa,"._5pcp");if(la())na().setEvent('es_subtitle_count').setCount(va.length).log();if(va.length===0)return;var wa=va[0],xa=wa.parentNode;if(!wa||!xa)return;var ya=ca();wa.parentNode.replaceChild(ya,wa);var za=da(wa);ua.appendChild(za);w.set(ta,za);x.set(ta,ya)}function aa(sa){if(ma())pa('usp_timer');var ta=ja();if(!ta){if(la())na().setEvent('usp_feed_root_missing').log();return}var ua=x.get(sa);if(!ua){if(la())na().setEvent('usp_fake_missing').log();return}var va=w.get(sa);if(!va){if(la())na().setEvent('usp_real_missing').log();return}var wa=ta.getBoundingClientRect(),xa=ua.getBoundingClientRect(),ya=xa.top!==0&&xa.left!==0;va.style.display=ya?'initial':'none';va.style.top=xa.top-wa.top+'px';va.style.left=xa.left-wa.left+'px';if(ma())na().setEvent('usp_duration').setDurationMs(qa('usp_timer')).log();}function ba(){if(ma())pa('eausp_duration');ia();var sa=v();sa.forEach(function(ta,ua){z(ta,ua);aa(ua)});if(ma())na().setEvent('eausp_duration').setDurationMs(qa('eausp_duration')).setCount(sa.size).log();}function ca(){return c('DOM').create('div',{'class':"_4kgx"})}function da(sa){return c('DOM').create('div',{style:'position: absolute; z-index: 1;'},sa)}function ea(sa){var ta=document.createElement('style');ta.type='text/css';ta.textContent=c('cxodecode')(sa);document.getElementsByTagName('head')[0].appendChild(ta)}var fa=null;function ga(){return fa}function ha(){if(fa)return;var sa=ja();fa=c('DOM').create('div',{style:'position: relative;'});sa.insertBefore(fa,sa.firstChild)}function ia(){if(!fa)return;var sa=ja();if(fa.parentNode===sa)return;c('DOM').remove(fa);sa.insertBefore(fa,sa.firstChild)}function ja(){return c('LitestandStream').getStreamRoot()||document.body}function ka(){return c('DOM').scry(ja(),"._5pat")}function la(){return !!c('SLConfig').gk.sl_perf_logging}function ma(){return !!c('SLConfig').gk.sl_perf_logging_heavy}function na(){return new (c('SLPerfTypedLogger'))()}var oa=new (c('Map'))();function pa(sa){oa.set(sa,Date.now())}function qa(sa){var ta=oa.get(sa);return ta==null?-1:Date.now()-ta}var ra={init:l};f.exports=ra}),null);
__d("XPubcontentInlinePhotoPivotsEventsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/inline_photo_pivots_chaining\/events\/",{})}),null);
__d('EntstreamAttachmentRelatedShare',['csx','cx','Arbiter','AsyncRequest','AttachmentRelatedShareConstants','CSS','DOM','Event','XPubcontentInlinePhotoPivotsEventsController','ge','getOrCreateDOMID','tidyEvent'],(function a(b,c,d,e,f,g,h,i){var j=2,k=3,l={loadRelatedAttachment:function m(n,o,p){var q=null;if(typeof n==='string'){q=c('ge')(n)}else q=n;if(!q)return;var r=c('Event').listen(q,'click',function(){r.remove();c('Arbiter').inform(c('AttachmentRelatedShareConstants').ARTICLE_CLICK,{attachment:q,global_share_id:o,is_right_click:false,share_id:p})}),s=c('Event').listen(q,'mousedown',function(event){if(event.which===k||event.button===j){s.remove();c('Arbiter').inform(c('AttachmentRelatedShareConstants').ARTICLE_CLICK,{attachment:q,global_share_id:o,is_right_click:true})}})},loadInlineStoryPivotAttachment:function m(n,o){var p=c('ge')(n);if(!p)return;var q=c('Event').listen(p,'click',function(){q.remove();c('Arbiter').inform(c('AttachmentRelatedShareConstants').PHOTO_CLICK,{attachment:p,storyid:o})})},loadRelatedGameAttachment:function m(n,o){var p=null;if(typeof n==='string'){p=c('ge')(n)}else p=n;if(!p)return;c('tidyEvent')(c('Event').listen(p,'click',function(){c('Arbiter').inform(c('AttachmentRelatedShareConstants').GAME_CLICK,{attachment:p,global_share_id:o})}));c('tidyEvent')(c('Event').listen(p,'mousedown',function(event){if(event.which===k||event.button===j)c('Arbiter').inform(c('AttachmentRelatedShareConstants').GAME_CLICK,{attachment:p,global_share_id:o});}))},loadRelatedLSCVideoAttachment:function m(n,o){var p=null;if(typeof n==='string'){p=c('ge')(n)}else p=n;if(!p)return;var q=c('Event').listen(p,'click',function(){q.remove();c('Arbiter').inform(c('AttachmentRelatedShareConstants').VIDEO_CLICK,{attachment:p,global_share_id:o})})},loadRelatedLSCInlineVideoAttachment:function m(n,o){var p=null;if(typeof n==='string'){p=c('ge')(n)}else p=n;if(!p)return;c('Event').listen(p,'click',function(){var q="^div._4-u2",r="_1d8v",s=c('DOM').scry(p,q),t=s.length===1?s[0]:null,u=t.parentNode,v=u.previousSibling;while(!v){u=u.parentNode;v=u.previousSibling}if(!c('CSS').hasClass(v,r)){var w=c('DOM').create('div',{className:r}),x=c('DOM').insertBefore(t.parentNode,w),y=x.length>=1?x[0]:null}else y=v;var z=c('getOrCreateDOMID')(y);new (c('AsyncRequest'))().setURI('/ajax/flash/expand_inline.php').setData({share_id:o,target_div:z,max_width:470,max_height:264,replace_target_div:true}).setMethod('GET').setReadOnly(true).setRelativeTo(p.parentNode).send()})},loadRelatedEventsPivotAttachment:function m(n,o){var p=null;if(typeof n==='string'){p=c('ge')(n)}else p=n;if(!p)return;c('tidyEvent')(c('Event').listen(p,'click',function(){c('Arbiter').inform(c('AttachmentRelatedShareConstants').EVENT_JOIN,{attachment:p,event_id:o})}))},loadRelatedProductAttachment:function m(n,o){var p=null;if(typeof n==='string'){p=c('ge')(n)}else p=n;if(!p)return;c('tidyEvent')(c('Event').listen(p,'click',function(){c('Arbiter').inform(c('AttachmentRelatedShareConstants').PRODUCT_CLICK,{attachment:p,product_id:o})}))},loadMapAttachment:function m(n,o,p){var q=typeof n==='string'?c('ge')(n):n;if(!q)return;var r=typeof o==='string'?c('ge')(o):o;if(!r)return;c('tidyEvent')(c('Event').listen(q,'click',function(){c('Arbiter').inform(c('AttachmentRelatedShareConstants').MAP_CLICK,{attachment:r,story_id:p})}))},loadMapAttachmentActionButton:function m(n,o){var p=typeof n==='string'?c('ge')(n):n;if(!p)return;c('tidyEvent')(c('Event').listen(p,'click',function(){c('Arbiter').inform(c('AttachmentRelatedShareConstants').ACTION_BUTTON_CLICK,{button:p,story_id:o})}))},closeButton:function m(n,o){c('Event').listen(n,'click',function(){c('DOM').remove(o)})},closeButtonPhotoPivots:function m(n,o,p,q){c('Event').listen(n,'click',function(){var r=c('XPubcontentInlinePhotoPivotsEventsController').getURIBuilder(),s={story_id:p,search_query_type:q,event:'hide'};new (c('AsyncRequest'))().setMethod('POST').setURI(r.getURI()).setData(s).send();c('DOM').remove(o)})},seeAllLinkPhotoPivots:function m(n,o,p){c('Event').listen(n,'click',function(){var q=c('XPubcontentInlinePhotoPivotsEventsController').getURIBuilder(),r={story_id:o,search_query_type:p,event:'see_all'};new (c('AsyncRequest'))().setMethod('POST').setURI(q.getURI()).setData(r).send()})},removeOldSuggestions:function m(n){var o=c('ge')(n);if(!o)return;var p=c('DOM').scry(o.parentNode,"._5d73");for(var q=1;q<p.length;q++)c('DOM').remove(p[q]);setTimeout(function(){c('CSS').show(p[0])},1000)},showHiddenSuggestions:function m(n){var o=c('Event').listen(n,'click',function(){o.remove();var p="^._1ui8",q=c('DOM').scry(n,p);if(!q)return;c('CSS').hide(q[0]);var r=q[0].previousSibling;while(r){c('CSS').show(r);r=r.previousSibling}})}};f.exports=l}),null);
__d('FeedTrackingAsync',['Arbiter','Run','collectDataAttributes'],(function a(b,c,d,e,f,g){var h;f.exports.init=function(){if(h)return;h=c('Arbiter').subscribe('AsyncRequest/send',function(i,j){var k=j.request,l=k.getRelativeTo();if(l){var m=k.getData(),n=c('collectDataAttributes')(l,['ft']);if(n.ft&&Object.keys(n.ft).length)Object.assign(m,n);}});c('Run').onLeave(function(){h.unsubscribe();h=null})}}),null);
__d('FbFeedAccessible',['csx','fbt','invariant','AccessibilityConfig','Arbiter','ARIA','BootloadedComponent.react','CSS','DataAttributeUtils','DOMQuery','JSResource','LitestandMessages','React','ReactDOM','SubscriptionsHandler','ge','getOrCreateDOMID'],(function a(b,c,d,e,f,g,h,i,j){var k='Accessibility/StoriesRequested',l='Accessibility/StoriesLoaded',m='Accessibility/StoryContentInserted',n='Accessibility/SubstreamInserted',o=void 0,p=void 0,q={init:function r(s){o=s;if(c('AccessibilityConfig').a11yNewsfeedStoryEnumeration){var t=new (c('SubscriptionsHandler'))();t.addSubscriptions(c('Arbiter').subscribe(c('LitestandMessages').STORIES_REQUESTED,this._onStoriesRequested.bind(this)),c('Arbiter').subscribe(c('LitestandMessages').STORIES_INSERTED,this._onInsertedSubstream.bind(this)),c('Arbiter').subscribe(c('LitestandMessages').NEWER_STORIES_INSERTED,this._onInsertedSubstream.bind(this)),c('Arbiter').subscribe(l,this._processStoriesLoaded.bind(this)),c('Arbiter').subscribe(k,this._processStoriesRequested.bind(this)),c('Arbiter').subscribe(m,this._processStoryContentInserted.bind(this)),c('Arbiter').subscribe(n,this._processInsertedSubstream.bind(this)));this._enumerateStories()}},informStoryContentInserted:function r(s){c('Arbiter').inform(m,s);var t=c('ge')(s);if(t&&this._isStory(t)){this.setARIARole(t);this.setAriaLabelledBy(t);this.setAriaDescribedBy(t)}},setARIARole:function r(s){s.setAttribute('role','article')},setAriaLabelledBy:function r(s){if(s.getAttribute('aria-labelledby'))return;var t=this._filterForElement(s,["._5pbw"]);if(t.length>0)s.setAttribute('aria-labelledby',t.map(function(u){return c('getOrCreateDOMID')(u)}).join(' '));},setAriaDescribedBy:function r(s){if(s.getAttribute('aria-describedby'))return;var t=this._filterForElement(s,[".timestampContent","._5pbx"]);if(t.length>0)s.setAttribute('aria-describedby',t.map(function(u){return c('getOrCreateDOMID')(u)}).join(' '));},_getStories:function r(s){return c('DOMQuery').scry(s||o,"._5jmm")},_onInsertedSubstream:function r(s,t){if(t&&t.substream_id)c('Arbiter').inform(n,t.substream_id);},_onStoriesRequested:function r(){c('Arbiter').inform(k)},_enumerateStories:function r(){var s=this._getStories(o);p=s.length;s.forEach(function(t,u){this._enumerateStory(t,u+=1)}.bind(this))},_enumerateSubstream:function r(s){var t=this._getStories();p=t.length;var u=this._getStories(c('ge')(s)),v=u.length||0;for(var w=0;w<v;w++)this._registerStoryEnumerationPosition(u[w],p-v+(w+1),w+1);},_enumerateStory:function r(s,t){this._isStory(s)||j(0);if(t>0){s.setAttribute('aria-posinset',''+t);s.setAttribute('aria-setsize',p)}},_processStoriesLoaded:function r(){c('ARIA').notify(i._("More stories loaded."))},_processStoriesRequested:function r(){c('ARIA').notify(i._("More stories requested."))},_processInsertedSubstream:function r(s,t){this._enumerateSubstream(t);this._enumerateStories()},_processStoryContentInserted:function r(s,t){var u=void 0,v=c('ge')(t);if(v)u=JSON.parse(c('DataAttributeUtils').getDataFt(v));if(u&&u.ordinal_position){var w=u.ordinal_position.split(':'),x=w[0],y=w[1];x=parseInt(x,10);y=parseInt(y,10);this._enumerateStory(v,x);if(y===1)c('Arbiter').inform(l);}},_registerStoryEnumerationPosition:function r(s,t,u){var v=JSON.parse(c('DataAttributeUtils').getDataFt(s));if(v){v.ordinal_position=t+':'+u;c('DataAttributeUtils').setDataFt(s,JSON.stringify(v))}},_isStory:function r(s){return c('CSS').matchesSelector(s,"._5jmm")},_filterForElement:function r(s,t){return t.map(function(u){return c('DOMQuery').scry(s||document,u)[0]}).filter(function(u){return !!u})}};f.exports=q}),null);